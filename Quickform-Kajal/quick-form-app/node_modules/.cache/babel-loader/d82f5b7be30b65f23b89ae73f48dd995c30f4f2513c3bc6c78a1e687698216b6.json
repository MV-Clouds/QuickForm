{"ast":null,"code":"import _objectSpread from\"C:/Users/MVclouds/Desktop/QuickForm/Merged Mapping QF/QuickForm/QuickForm-Romit-Kajal-Merge/quick-form-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// File: MappingField.jsx\nimport{useState,useEffect}from\"react\";import{useLocation}from\"react-router-dom\";import{ReactFlowProvider}from\"reactflow\";import{motion,AnimatePresence}from\"framer-motion\";import FlowDesigner from\"./FlowDesigner\";import ActionPanel from\"./ActionPanel\";import{XMarkIcon}from'@heroicons/react/24/solid';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Sidebar=_ref=>{let{onDragStart}=_ref;const actions=[\"Create/Update\",\"Find\"];const utilities=[\"Formatter\",\"Filter\",\"Path\",\"Loop\",\"Condition\"];return/*#__PURE__*/_jsxs(motion.div,{className:\"w-1/5 min-w-[200px] bg-white p-6 h-full overflow-y-auto shadow-lg border-r border-gray-200\",initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:0.3},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-700 mb-6 border-b border-gray-200 pb-3\",children:\"Actions\"}),actions.map(action=>/*#__PURE__*/_jsxs(motion.div,{draggable:true,onDragStart:event=>onDragStart(event,\"action\",action),className:\"mb-3 p-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-md cursor-grab shadow-sm hover:shadow-md transform hover:-translate-y-0.5 transition-all duration-200 ease-in-out flex items-center justify-between text-sm\",whileHover:{scale:1.01},whileTap:{scale:0.99},children:[/*#__PURE__*/_jsx(\"span\",{children:action}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4 opacity-75\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\",clipRule:\"evenodd\"})})]},action)),/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-700 mb-6 mt-8 border-b border-gray-200 pb-3\",children:\"Utilities\"}),utilities.map(utility=>/*#__PURE__*/_jsxs(motion.div,{draggable:true,onDragStart:event=>onDragStart(event,\"utility\",utility),className:\"mb-3 p-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-md cursor-grab shadow-sm hover:shadow-md transform hover:-translate-y-0.5 transition-all duration-200 ease-in-out flex items-center justify-between text-sm\",whileHover:{scale:1.01},whileTap:{scale:0.99},children:[/*#__PURE__*/_jsx(\"span\",{children:utility}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4 opacity-75\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 4a1 1 0 00-1 1v3H6a1 1 0 100 2h3v3a1 1 0 102 0v-3h3a1 1 0 100-2h-3V5a1 1 0 00-1-1z\"})})]},utility))]});};const MappingFields=()=>{const location=useLocation();const{selectedObjects=[],selectedFields={},fieldsData={},formVersionId}=location.state||{};const[selectedNode,setSelectedNode]=useState(null);const[mappings,setMappings]=useState({});const[formFields,setFormFields]=useState([]);const[salesforceObjects,setSalesforceObjects]=useState(selectedObjects.map(obj=>({name:obj,fields:selectedFields[obj]||[],fieldDetails:fieldsData[obj]||[]// Include field metadata (e.g., type, required)\n})));const[isLoading,setIsLoading]=useState(false);const[fetchError,setFetchError]=useState(null);const[token,setToken]=useState(null);const[existingMappings,setExistingMappings]=useState({});const[isSaving,setIsSaving]=useState(false);const[saveError,setSaveError]=useState(null);const[nodes,setNodes]=useState([]);const[edges,setEdges]=useState([]);const initialNodes=[{id:\"start\",type:\"custom\",position:{x:250,y:50},data:{label:\"Start\",displayLabel:\"Start\",order:1},draggable:true},{id:\"end\",type:\"custom\",position:{x:250,y:500},data:{label:\"End\",displayLabel:\"End\",order:null},draggable:true}];console.log('salesforceObjects ===> ',salesforceObjects,salesforceObjects.fields);const initialEdges=[];const showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'error';setSaveError({message,type});setTimeout(()=>{setSaveError(null);},5000);};const fetchAccessToken=async function(userId,instanceUrl){let retries=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;try{const url=process.env.REACT_APP_GET_ACCESS_TOKEN_URL||\"https://76vlfwtmig.execute-api.us-east-1.amazonaws.com/prod/getAccessToken\";if(!url)throw new Error(\"Access token URL is not defined.\");const response=await fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({userId,instanceUrl})});const data=await response.json();if(!response.ok){if(response.status===401&&retries>0)return await fetchAccessToken(userId,instanceUrl,retries-1);throw new Error(data.error||\"Failed to fetch access token: \".concat(response.status));}if(!data.access_token)throw new Error(\"No access token returned in response\");return data.access_token;}catch(error){showToast(\"Failed to fetch access token: \".concat(error.message,\". Please verify your Salesforce credentials or contact support.\"),'error');return null;}};const fetchFormFields=async(userId,instanceUrl,formVersionId)=>{try{const url=process.env.REACT_APP_FETCH_METADATA_URL||\"https://hmcyy3382m.execute-api.us-east-1.amazonaws.com/prod/fetchMetadata\";if(!url)throw new Error(\"Metadata URL is not defined.\");const cleanedInstanceUrl=instanceUrl.replace(/https?:\\/\\//,\"\");const response=await fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({userId,instanceUrl:cleanedInstanceUrl,formVersionId})});const text=await response.text();let data=JSON.parse(text);if(!response.ok)throw new Error(data.error||\"Failed to fetch form metadata: \".concat(response.status));let formRecords=[];try{formRecords=JSON.parse(data.FormRecords);}catch(_unused){}const formVersion=formRecords.find(form=>{var _form$FormVersions;return(_form$FormVersions=form.FormVersions)===null||_form$FormVersions===void 0?void 0:_form$FormVersions.some(version=>version.Id===formVersionId);});const version=formVersion===null||formVersion===void 0?void 0:formVersion.FormVersions.find(version=>version.Id===formVersionId);const fields=(version===null||version===void 0?void 0:version.Fields)||[];const normalizedFields=fields.map(field=>({id:field.Id||field.id||\"field_\".concat(field.Name||field.name),name:field.Name||field.name||field.label||\"Unknown\",type:field.Field_Type__c||field.type}));if(normalizedFields.length===0)showToast(\"No form fields found for the specified form version.\",'error');return normalizedFields;}catch(error){showToast(\"Failed to load form fields: \".concat(error.message),'error');return[];}};const validateNode=(nodeId,allNodeIds)=>{if(nodeId===\"start\"||nodeId===\"end\")return true;const node=nodes.find(n=>n.id===nodeId);if(!node){showToast(\"Node \".concat(nodeId,\" not found.\"));return false;}if(node.data.action===\"Path\"){const outgoingEdges=edges.filter(edge=>edge.source===nodeId&&edge.conditionNodeId);if(outgoingEdges.length===0){showToast(\"Path node \".concat(node.data.displayLabel,\" must have at least one outgoing connection.\"));return false;}for(const edge of outgoingEdges){const conditionNodeId=edge.target;const conditionNode=nodes.find(n=>n.id===conditionNodeId);if(!conditionNode||conditionNode.data.action!==\"Condition\"){showToast(\"Invalid condition node connected to Path node \".concat(node.data.displayLabel,\".\"));return false;}const conditionMapping=mappings[conditionNodeId]||{};const validPathOption=conditionMapping.pathOption||\"Rules\";if(![\"Rules\",\"Always Run\",\"Fallback\"].includes(validPathOption)){showToast(\"Condition node \".concat(conditionNode.data.displayLabel,\" for Path node \").concat(node.data.displayLabel,\" must have a valid path option (Rules, Always Run, or Fallback).\"));return false;}if(validPathOption===\"Rules\"&&(!conditionMapping.conditions||conditionMapping.conditions.length===0)){showToast(\"Condition node \".concat(conditionNode.data.displayLabel,\" for Path node \").concat(node.data.displayLabel,\" must have at least one condition configured when using Rules.\"));return false;}}return true;}else if(node.data.action===\"Condition\"){const conditionMapping=mappings[nodeId]||{};const validPathOption=conditionMapping.pathOption||\"Rules\";if(validPathOption===\"Rules\"&&(!conditionMapping.conditions||conditionMapping.conditions.length===0)){showToast(\"Condition node \".concat(node.data.displayLabel,\" must have at least one condition configured when using Rules.\"));return false;}return true;}const nodeMapping=mappings[nodeId]||{};if(node.data.action===\"Create/Update\"){if(!nodeMapping.salesforceObject||!nodeMapping.fieldMappings||nodeMapping.fieldMappings.length===0){showToast(\"No Salesforce object or complete mappings defined for node \".concat(node.data.displayLabel,\".\"));return false;}if(nodeMapping.enableConditions&&(!nodeMapping.conditions||nodeMapping.conditions.length===0)){showToast(\"No complete conditions defined for node \".concat(node.data.displayLabel,\" when conditions are enabled.\"));return false;}if(nodeMapping.returnLimit&&(isNaN(nodeMapping.returnLimit)||nodeMapping.returnLimit<1||nodeMapping.returnLimit>100)){showToast(\"Return limit for node \".concat(node.data.displayLabel,\" must be a number between 1 and 100.\"));return false;}}else if(node.data.action===\"Find\"||node.data.action===\"Filter\"){if(!nodeMapping.salesforceObject||!nodeMapping.conditions||nodeMapping.conditions.length===0){showToast(\"No Salesforce object or complete conditions defined for node \".concat(node.data.displayLabel,\".\"));return false;}if(nodeMapping.conditions.length>1&&!nodeMapping.logicType){showToast(\"Logic type must be defined for node \".concat(node.data.displayLabel,\" with multiple conditions.\"));return false;}if(nodeMapping.logicType===\"Custom\"&&!nodeMapping.customLogic){showToast(\"Custom logic expression must be provided for node \".concat(node.data.displayLabel,\".\"));return false;}if(nodeMapping.returnLimit&&(isNaN(nodeMapping.returnLimit)||nodeMapping.returnLimit<1||nodeMapping.returnLimit>100)){showToast(\"Return limit for node \".concat(node.data.displayLabel,\" must be a number between 1 and 100.\"));return false;}}else if(node.data.action===\"Loop\"){if(!nodeMapping.loopConfig||!nodeMapping.loopConfig.loopCollection||!nodeMapping.loopConfig.currentItemVariableName){showToast(\"Loop node \".concat(node.data.displayLabel,\" must have a collection and current item variable name.\"));return false;}const findNodeIds=allNodeIds.filter(id=>nodes.find(n=>n.id===id&&n.data.action===\"Find\"));if(!findNodeIds.includes(nodeMapping.loopConfig.loopCollection)){showToast(\"Invalid Find node ID in loop collection for Loop node \".concat(node.data.displayLabel,\": \").concat(nodeMapping.loopConfig.loopCollection,\". Available Find nodes: \").concat(findNodeIds.join(', ')||'none',\".\"));return false;}if(nodeMapping.loopConfig.maxIterations&&(isNaN(nodeMapping.loopConfig.maxIterations)||nodeMapping.loopConfig.maxIterations<1)){showToast(\"Max iterations for Loop node \".concat(node.data.displayLabel,\" must be a positive number.\"));return false;}if(nodeMapping.loopConfig.loopVariables&&(typeof nodeMapping.loopConfig.loopVariables!==\"object\"||typeof nodeMapping.loopConfig.loopVariables.currentIndex!==\"boolean\"||typeof nodeMapping.loopConfig.loopVariables.counter!==\"boolean\"||![\"0\",\"1\"].includes(nodeMapping.loopConfig.loopVariables.indexBase))){showToast(\"Invalid loop variables configuration for Loop node \".concat(node.data.displayLabel,\".\"));return false;}}else if(node.data.action===\"Formatter\"){if(!nodeMapping.formatterConfig||!nodeMapping.formatterConfig.inputField||!nodeMapping.formatterConfig.operation){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have an input field and operation defined.\"));return false;}if(nodeMapping.formatterConfig.formatType===\"date\"){var _nodeMapping$formatte,_nodeMapping$formatte2,_nodeMapping$formatte3,_nodeMapping$formatte4,_nodeMapping$formatte5,_nodeMapping$formatte6;if((nodeMapping.formatterConfig.operation===\"format_date\"||nodeMapping.formatterConfig.operation===\"format_datetime\"||nodeMapping.formatterConfig.operation===\"format_time\")&&(!((_nodeMapping$formatte=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte!==void 0&&_nodeMapping$formatte.format)||!((_nodeMapping$formatte2=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte2!==void 0&&_nodeMapping$formatte2.timezone))){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a date format and timezone defined.\"));return false;}if(nodeMapping.formatterConfig.operation===\"timezone_conversion\"&&(!((_nodeMapping$formatte3=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte3!==void 0&&_nodeMapping$formatte3.timezone)||!((_nodeMapping$formatte4=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte4!==void 0&&_nodeMapping$formatte4.targetTimezone))){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have source and target timezones defined.\"));return false;}if((nodeMapping.formatterConfig.operation===\"add_date\"||nodeMapping.formatterConfig.operation===\"subtract_date\")&&(!((_nodeMapping$formatte5=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte5!==void 0&&_nodeMapping$formatte5.unit)||((_nodeMapping$formatte6=nodeMapping.formatterConfig.options)===null||_nodeMapping$formatte6===void 0?void 0:_nodeMapping$formatte6.value)===undefined)){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a date unit and value defined.\"));return false;}if(nodeMapping.formatterConfig.operation===\"date_difference\"&&!nodeMapping.formatterConfig.inputField2&&!nodeMapping.formatterConfig.useCustomInput){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a second input field or use custom input for date difference.\"));return false;}if(nodeMapping.formatterConfig.useCustomInput&&!nodeMapping.formatterConfig.customValue){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a custom compare date defined.\"));return false;}}if(nodeMapping.formatterConfig.formatType===\"number\"){var _nodeMapping$formatte7,_nodeMapping$formatte8,_nodeMapping$formatte9,_nodeMapping$formatte0,_nodeMapping$formatte1,_nodeMapping$formatte10,_nodeMapping$formatte11;if(nodeMapping.formatterConfig.operation===\"locale_format\"&&!((_nodeMapping$formatte7=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte7!==void 0&&_nodeMapping$formatte7.locale)){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a locale defined.\"));return false;}if(nodeMapping.formatterConfig.operation===\"currency_format\"&&(!((_nodeMapping$formatte8=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte8!==void 0&&_nodeMapping$formatte8.currency)||!((_nodeMapping$formatte9=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte9!==void 0&&_nodeMapping$formatte9.locale))){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a currency and locale defined.\"));return false;}if(nodeMapping.formatterConfig.operation===\"round_number\"&&((_nodeMapping$formatte0=nodeMapping.formatterConfig.options)===null||_nodeMapping$formatte0===void 0?void 0:_nodeMapping$formatte0.decimals)===undefined){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have number of decimals defined.\"));return false;}if(nodeMapping.formatterConfig.operation===\"phone_format\"&&(!((_nodeMapping$formatte1=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte1!==void 0&&_nodeMapping$formatte1.countryCode)||!((_nodeMapping$formatte10=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte10!==void 0&&_nodeMapping$formatte10.format))){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a country code and format defined.\"));return false;}if(nodeMapping.formatterConfig.operation===\"math_operation\"&&(!((_nodeMapping$formatte11=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte11!==void 0&&_nodeMapping$formatte11.operation)||!nodeMapping.formatterConfig.inputField2&&!nodeMapping.formatterConfig.useCustomInput)){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a math operation and second input field or custom value defined.\"));return false;}if(nodeMapping.formatterConfig.useCustomInput&&nodeMapping.formatterConfig.customValue===undefined){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a custom value defined for math operation.\"));return false;}}if(nodeMapping.formatterConfig.formatType===\"text\"){var _nodeMapping$formatte12,_nodeMapping$formatte13,_nodeMapping$formatte14,_nodeMapping$formatte15;if(nodeMapping.formatterConfig.operation===\"replace\"&&(!((_nodeMapping$formatte12=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte12!==void 0&&_nodeMapping$formatte12.searchValue)||!((_nodeMapping$formatte13=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte13!==void 0&&_nodeMapping$formatte13.replaceValue))){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have search and replace values defined.\"));return false;}if(nodeMapping.formatterConfig.operation===\"split\"&&(!((_nodeMapping$formatte14=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte14!==void 0&&_nodeMapping$formatte14.delimiter)||!((_nodeMapping$formatte15=nodeMapping.formatterConfig.options)!==null&&_nodeMapping$formatte15!==void 0&&_nodeMapping$formatte15.index))){showToast(\"Formatter node \".concat(node.data.displayLabel,\" must have a delimiter and index defined.\"));return false;}}}return true;};const saveAllConfiguration=async()=>{setIsSaving(true);setSaveError(null);const userId=sessionStorage.getItem('userId');const instanceUrl=sessionStorage.getItem('instanceUrl');console.log('userid--> ',userId);console.log('instanceUrl--> ',instanceUrl);if(!userId||!instanceUrl){showToast(\"Missing userId or instanceUrl. Please log in again.\",'error');setIsSaving(false);return;}if(!token){const newToken=await fetchAccessToken(userId,instanceUrl);if(!newToken){setIsSaving(false);return;}setToken(newToken);}if(!token||token.split('.').length!==3){showToast(\"Invalid authentication token format. Please log in again.\",'error');setIsSaving(false);return;}for(const node of nodes){const isConnected=edges.some(edge=>edge.source===node.id||edge.target===node.id);if(!isConnected&&node.id!==\"start\"&&node.id!==\"end\"){showToast(\"Node \".concat(node.data.displayLabel,\" is not connected. Please connect all nodes before saving.\"),'error');setIsSaving(false);return;}}const allMappings=[];let maxOrder=0;for(const node of nodes){const nodeMapping=mappings[node.id]||{};const incomingEdge=edges.find(e=>e.target===node.id);const outgoingEdges=edges.filter(e=>e.source===node.id);const previousNodeId=incomingEdge===null||incomingEdge===void 0?void 0:incomingEdge.source;const nextNodeIds=outgoingEdges.map(e=>e.target).filter((id,index,self)=>self.indexOf(id)===index);let actionType=nodeMapping.actionType||node.data.action;if(node.id===\"start\")actionType=\"Start\";else if(node.id===\"end\")actionType=\"End\";else if(actionType===\"Create/Update\")actionType=\"CreateUpdate\";else if(actionType===\"Find\")actionType=\"Find\";else if(actionType===\"Filter\")actionType=\"Filter\";else if(actionType===\"Path\")actionType=\"Path\";else if(actionType===\"Loop\")actionType=\"Loop\";else if(actionType===\"Formatter\")actionType=\"Formatter\";else if(actionType===\"Condition\")actionType=\"Condition\";else if(!actionType)actionType=node.data.action||\"Unknown\";const order=node.data.order||(actionType!==\"End\"?++maxOrder:maxOrder+1);maxOrder=Math.max(maxOrder,order);const mappingData={nodeId:node.id,actionType,salesforceObject:actionType===\"CreateUpdate\"||actionType===\"Find\"||actionType===\"Filter\"||actionType===\"Condition\"&&nodeMapping.pathOption===\"Rules\"?nodeMapping.salesforceObject||\"\":\"\",fieldMappings:actionType===\"CreateUpdate\"?nodeMapping.fieldMappings||[]:[],conditions:actionType===\"Find\"||actionType===\"Filter\"||actionType===\"CreateUpdate\"&&nodeMapping.enableConditions||actionType===\"Condition\"&&nodeMapping.pathOption===\"Rules\"?nodeMapping.conditions||[]:[],logicType:actionType===\"Find\"||actionType===\"Filter\"||actionType===\"CreateUpdate\"&&nodeMapping.enableConditions||actionType===\"Condition\"&&nodeMapping.pathOption===\"Rules\"?nodeMapping.logicType||\"AND\":null,customLogic:nodeMapping.logicType===\"Custom\"?nodeMapping.customLogic||\"\":\"\",loopConfig:actionType===\"Loop\"?nodeMapping.loopConfig||{}:undefined,formatterConfig:actionType===\"Formatter\"?nodeMapping.formatterConfig||{}:undefined,enableConditions:actionType===\"CreateUpdate\"?nodeMapping.enableConditions||false:undefined,returnLimit:actionType===\"Find\"||actionType===\"Filter\"?nodeMapping.returnLimit||\"\":undefined,sortField:actionType===\"Find\"||actionType===\"Filter\"?nodeMapping.sortField||\"\":undefined,sortOrder:actionType===\"Find\"||actionType===\"Filter\"?nodeMapping.sortOrder||\"ASC\":undefined,pathOption:actionType===\"Condition\"?nodeMapping.pathOption||\"Rules\":undefined,nextNodeIds,previousNodeId,label:node.data.label,order,formVersionId};allMappings.push(mappingData);}const allNodeIds=allMappings.map(m=>m.nodeId);for(const mapping of allMappings){if(!validateNode(mapping.nodeId,allNodeIds)){setIsSaving(false);return;}}const headers={\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)};const saveMappingsUrl=process.env.REACT_APP_SAVE_MAPPINGS_URL||\"https://q8en3hy1q7.execute-api.us-east-1.amazonaws.com/saveFieldMapping\";try{const payload={userId,instanceUrl:instanceUrl.replace(/https?:\\/\\//,\"\"),mappings:allMappings};const response=await fetch(saveMappingsUrl,{method:\"POST\",headers,body:JSON.stringify(payload)});const data=await response.json();if(!response.ok)throw new Error(data.error||\"Failed to save configurations: \".concat(response.status));if(data.success){const updatedMappings=_objectSpread({},mappings);allMappings.forEach((mapping,index)=>{if(data.mappingIds&&data.mappingIds[index]){updatedMappings[mapping.nodeId]=_objectSpread(_objectSpread({},mapping),{},{id:data.mappingIds[index]});}});setMappings(updatedMappings);showToast(\"All configurations saved successfully!\",'success');}else{throw new Error(\"Save failed: \".concat(data.message||\"Unknown error\"));}}catch(error){showToast(error.message||\"Failed to save configurations. Please check your network or contact support.\",'error');}finally{setIsSaving(false);}};const initializeData=async()=>{setIsLoading(true);setFetchError(null);const userId=sessionStorage.getItem('userId');const instanceUrl=sessionStorage.getItem('instanceUrl');if(!userId||!instanceUrl||!formVersionId){showToast(\"Missing userId, instanceUrl, or formVersionId.\",'error');setIsLoading(false);return;}try{// Fetch access token\nconst tokenToUse=await fetchAccessToken(userId,instanceUrl);if(!tokenToUse){setIsLoading(false);return;}setToken(tokenToUse);// Fetch form fields for the formVersionId\nconst formFieldsData=await fetchFormFields(userId,instanceUrl,formVersionId,tokenToUse);setFormFields(formFieldsData);}catch(error){showToast(\"Initialization failed: \".concat(error.message),'error');}finally{setIsLoading(false);}};useEffect(()=>{// Initialize only if formFields or mappings are not set\nif(!formFields.length||!Object.keys(mappings).length){initializeData();}},[formFields,mappings]);const onDragStart=(event,nodeType,action)=>{event.dataTransfer.setData(\"application/reactflow-type\",nodeType);event.dataTransfer.setData(\"application/reactflow-id\",action);event.dataTransfer.effectAllowed=\"move\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen bg-gray-50 font-sans relative\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:isLoading&&/*#__PURE__*/_jsx(motion.div,{className:\"fixed inset-0 flex items-center justify-center bg-gray-50 bg-opacity-80 z-50\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:0.3},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-500\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-700 text-lg font-medium\",children:\"Loading Editor...\"})]})})}),!isLoading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(motion.header,{className:\"bg-white p-4 flex justify-between items-center shadow-md h-16 sticky top-0 z-10 border-b border-gray-200\",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:0.3},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-800 tracking-tight\",children:\"Field Mapping\"}),/*#__PURE__*/_jsx(motion.button,{onClick:saveAllConfiguration,disabled:isSaving,className:\"px-5 py-2 rounded-md font-medium text-white shadow-sm transition-all duration-200 ease-in-out\\n                \".concat(isSaving?\"bg-gray-400 cursor-not-allowed\":\"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"),whileHover:{scale:1.02},whileTap:{scale:0.98},children:isSaving?\"Saving...\":\"Save All Configuration\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 overflow-hidden\",children:[/*#__PURE__*/_jsx(Sidebar,{onDragStart:onDragStart}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 relative z-0 h-[calc(100vh-64px)] overflow-hidden bg-gray-100\",children:/*#__PURE__*/_jsx(ReactFlowProvider,{children:/*#__PURE__*/_jsx(FlowDesigner,{initialNodes:initialNodes,initialEdges:initialEdges,setSelectedNode:setSelectedNode,setNodes:setNodes,setEdges:setEdges})})}),selectedNode&&[\"Create/Update\",\"Find\",\"Filter\",\"Loop\",\"Formatter\",\"Condition\"].includes(selectedNode.data.action)&&/*#__PURE__*/_jsx(ActionPanel,{nodeId:selectedNode.id,nodeType:selectedNode.data.action,formFields:formFields,salesforceObjects:salesforceObjects,mappings:mappings,setMappings:setMappings,setSalesforceObjects:setSalesforceObjects,onClose:()=>setSelectedNode(null),nodeLabel:selectedNode.data.displayLabel,nodes:nodes,edges:edges})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:saveError&&/*#__PURE__*/_jsxs(motion.div,{className:\"fixed top-24 right-4 \".concat(saveError.type==='success'?'bg-green-600':'bg-red-600',\" text-white px-5 py-3 rounded-md shadow-lg flex items-center space-x-3 z-50 max-w-sm\"),initial:{x:\"100%\",opacity:0},animate:{x:0,opacity:1},exit:{x:\"100%\",opacity:0},transition:{type:\"spring\",stiffness:300,damping:30},children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",strokeWidth:2,children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-sm flex-grow\",children:saveError.message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSaveError(null),className:\"p-1 rounded-full hover:bg-red-700 transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-4 w-4\"})})]})})]});};export default MappingFields;","map":{"version":3,"names":["useState","useEffect","useLocation","ReactFlowProvider","motion","AnimatePresence","FlowDesigner","ActionPanel","XMarkIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Sidebar","_ref","onDragStart","actions","utilities","div","className","initial","x","opacity","animate","transition","duration","children","map","action","draggable","event","whileHover","scale","whileTap","xmlns","viewBox","fill","fillRule","d","clipRule","utility","MappingFields","location","selectedObjects","selectedFields","fieldsData","formVersionId","state","selectedNode","setSelectedNode","mappings","setMappings","formFields","setFormFields","salesforceObjects","setSalesforceObjects","obj","name","fields","fieldDetails","isLoading","setIsLoading","fetchError","setFetchError","token","setToken","existingMappings","setExistingMappings","isSaving","setIsSaving","saveError","setSaveError","nodes","setNodes","edges","setEdges","initialNodes","id","type","position","y","data","label","displayLabel","order","console","log","initialEdges","showToast","message","arguments","length","undefined","setTimeout","fetchAccessToken","userId","instanceUrl","retries","url","process","env","REACT_APP_GET_ACCESS_TOKEN_URL","Error","response","fetch","method","headers","body","JSON","stringify","json","ok","status","error","concat","access_token","fetchFormFields","REACT_APP_FETCH_METADATA_URL","cleanedInstanceUrl","replace","text","parse","formRecords","FormRecords","_unused","formVersion","find","form","_form$FormVersions","FormVersions","some","version","Id","Fields","normalizedFields","field","Name","Field_Type__c","validateNode","nodeId","allNodeIds","node","n","outgoingEdges","filter","edge","source","conditionNodeId","target","conditionNode","conditionMapping","validPathOption","pathOption","includes","conditions","nodeMapping","salesforceObject","fieldMappings","enableConditions","returnLimit","isNaN","logicType","customLogic","loopConfig","loopCollection","currentItemVariableName","findNodeIds","join","maxIterations","loopVariables","currentIndex","counter","indexBase","formatterConfig","inputField","operation","formatType","_nodeMapping$formatte","_nodeMapping$formatte2","_nodeMapping$formatte3","_nodeMapping$formatte4","_nodeMapping$formatte5","_nodeMapping$formatte6","options","format","timezone","targetTimezone","unit","value","inputField2","useCustomInput","customValue","_nodeMapping$formatte7","_nodeMapping$formatte8","_nodeMapping$formatte9","_nodeMapping$formatte0","_nodeMapping$formatte1","_nodeMapping$formatte10","_nodeMapping$formatte11","locale","currency","decimals","countryCode","_nodeMapping$formatte12","_nodeMapping$formatte13","_nodeMapping$formatte14","_nodeMapping$formatte15","searchValue","replaceValue","delimiter","index","saveAllConfiguration","sessionStorage","getItem","newToken","split","isConnected","allMappings","maxOrder","incomingEdge","e","previousNodeId","nextNodeIds","self","indexOf","actionType","Math","max","mappingData","sortField","sortOrder","push","m","mapping","Authorization","saveMappingsUrl","REACT_APP_SAVE_MAPPINGS_URL","payload","success","updatedMappings","_objectSpread","forEach","mappingIds","initializeData","tokenToUse","formFieldsData","Object","keys","nodeType","dataTransfer","setData","effectAllowed","exit","header","button","onClick","disabled","onClose","nodeLabel","stiffness","damping","stroke","strokeWidth","strokeLinecap","strokeLinejoin"],"sources":["C:/Users/MVclouds/Desktop/QuickForm/Merged Mapping QF/QuickForm/QuickForm-Romit-Kajal-Merge/quick-form-app/src/components/form-mapping/MappingFields.jsx"],"sourcesContent":["// File: MappingField.jsx\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { ReactFlowProvider } from \"reactflow\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport FlowDesigner from \"./FlowDesigner\";\r\nimport ActionPanel from \"./ActionPanel\";\r\nimport { XMarkIcon } from '@heroicons/react/24/solid';\r\n\r\nconst Sidebar = ({ onDragStart }) => {\r\n  const actions = [\"Create/Update\", \"Find\"];\r\n  const utilities = [\"Formatter\", \"Filter\", \"Path\", \"Loop\", \"Condition\"];\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"w-1/5 min-w-[200px] bg-white p-6 h-full overflow-y-auto shadow-lg border-r border-gray-200\"\r\n      initial={{ x: -100, opacity: 0 }}\r\n      animate={{ x: 0, opacity: 1 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <h2 className=\"text-lg font-semibold text-gray-700 mb-6 border-b border-gray-200 pb-3\">Actions</h2>\r\n      {actions.map((action) => (\r\n        <motion.div\r\n          key={action}\r\n          draggable\r\n          onDragStart={(event) => onDragStart(event, \"action\", action)}\r\n          className=\"mb-3 p-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-md cursor-grab shadow-sm hover:shadow-md transform hover:-translate-y-0.5 transition-all duration-200 ease-in-out flex items-center justify-between text-sm\"\r\n          whileHover={{ scale: 1.01 }}\r\n          whileTap={{ scale: 0.99 }}\r\n        >\r\n          <span>{action}</span>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 opacity-75\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path fillRule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        </motion.div>\r\n      ))}\r\n      <h2 className=\"text-lg font-semibold text-gray-700 mb-6 mt-8 border-b border-gray-200 pb-3\">Utilities</h2>\r\n      {utilities.map((utility) => (\r\n        <motion.div\r\n          key={utility}\r\n          draggable\r\n          onDragStart={(event) => onDragStart(event, \"utility\", utility)}\r\n          className=\"mb-3 p-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-md cursor-grab shadow-sm hover:shadow-md transform hover:-translate-y-0.5 transition-all duration-200 ease-in-out flex items-center justify-between text-sm\"\r\n          whileHover={{ scale: 1.01 }}\r\n          whileTap={{ scale: 0.99 }}\r\n        >\r\n          <span>{utility}</span>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 opacity-75\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path d=\"M10 4a1 1 0 00-1 1v3H6a1 1 0 100 2h3v3a1 1 0 102 0v-3h3a1 1 0 100-2h-3V5a1 1 0 00-1-1z\" />\r\n          </svg>\r\n        </motion.div>\r\n      ))}\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nconst MappingFields = () => {\r\n  const location = useLocation();\r\n  const {\r\n    selectedObjects = [],\r\n    selectedFields = {},\r\n    fieldsData = {},\r\n    formVersionId,\r\n  } = location.state || {};\r\n\r\n  const [selectedNode, setSelectedNode] = useState(null);\r\n  const [mappings, setMappings] = useState({});\r\n  const [formFields, setFormFields] = useState([]);\r\n  const [salesforceObjects, setSalesforceObjects] = useState(\r\n    selectedObjects.map((obj) => ({\r\n      name: obj,\r\n      fields: selectedFields[obj] || [],\r\n      fieldDetails: fieldsData[obj] || [], // Include field metadata (e.g., type, required)\r\n    }))\r\n  );\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [fetchError, setFetchError] = useState(null);\r\n  const [token, setToken] = useState(null);\r\n  const [existingMappings, setExistingMappings] = useState({});\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [saveError, setSaveError] = useState(null);\r\n  const [nodes, setNodes] = useState([]);\r\n  const [edges, setEdges] = useState([]);\r\n\r\n  const initialNodes = [\r\n    { id: \"start\", type: \"custom\", position: { x: 250, y: 50 }, data: { label: \"Start\", displayLabel: \"Start\", order: 1 }, draggable: true },\r\n    { id: \"end\", type: \"custom\", position: { x: 250, y: 500 }, data: { label: \"End\", displayLabel: \"End\", order: null }, draggable: true },\r\n  ];\r\n\r\n  console.log('salesforceObjects ===> ',salesforceObjects, salesforceObjects.fields);\r\n  \r\n  const initialEdges = [];\r\n\r\n  const showToast = (message, type = 'error') => {\r\n    setSaveError({ message, type });\r\n    setTimeout(() => {\r\n      setSaveError(null);\r\n    }, 5000);\r\n  };\r\n\r\n  const fetchAccessToken = async (userId, instanceUrl, retries = 2) => {\r\n    try {\r\n      const url = process.env.REACT_APP_GET_ACCESS_TOKEN_URL || \"https://76vlfwtmig.execute-api.us-east-1.amazonaws.com/prod/getAccessToken\";\r\n      if (!url) throw new Error(\"Access token URL is not defined.\");\r\n      const response = await fetch(url, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ userId, instanceUrl }),\r\n      });\r\n      const data = await response.json();\r\n      if (!response.ok) {\r\n        if (response.status === 401 && retries > 0) return await fetchAccessToken(userId, instanceUrl, retries - 1);\r\n        throw new Error(data.error || `Failed to fetch access token: ${response.status}`);\r\n      }\r\n      if (!data.access_token) throw new Error(\"No access token returned in response\");\r\n      return data.access_token;\r\n    } catch (error) {\r\n      showToast(`Failed to fetch access token: ${error.message}. Please verify your Salesforce credentials or contact support.`, 'error');\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const fetchFormFields = async (userId, instanceUrl, formVersionId) => {\r\n    try {\r\n      const url = process.env.REACT_APP_FETCH_METADATA_URL || \"https://hmcyy3382m.execute-api.us-east-1.amazonaws.com/prod/fetchMetadata\";\r\n      if (!url) throw new Error(\"Metadata URL is not defined.\");\r\n      const cleanedInstanceUrl = instanceUrl.replace(/https?:\\/\\//, \"\");\r\n      const response = await fetch(url, { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ userId, instanceUrl: cleanedInstanceUrl, formVersionId }) });\r\n      const text = await response.text();\r\n      let data = JSON.parse(text);\r\n      if (!response.ok) throw new Error(data.error || `Failed to fetch form metadata: ${response.status}`);\r\n\r\n      let formRecords = [];\r\n      try { formRecords = JSON.parse(data.FormRecords); } catch { }\r\n\r\n      const formVersion = formRecords.find((form) => form.FormVersions?.some((version) => version.Id === formVersionId));\r\n      const version = formVersion?.FormVersions.find((version) => version.Id === formVersionId);\r\n      const fields = version?.Fields || [];\r\n      const normalizedFields = fields.map((field) => ({\r\n        id: field.Id || field.id || `field_${field.Name || field.name}`,\r\n        name: field.Name || field.name || field.label || \"Unknown\",\r\n        type: field.Field_Type__c || field.type,\r\n      }));\r\n      if (normalizedFields.length === 0) showToast(\"No form fields found for the specified form version.\", 'error');\r\n      return normalizedFields;\r\n    } catch (error) {\r\n      showToast(`Failed to load form fields: ${error.message}`, 'error');\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const validateNode = (nodeId, allNodeIds) => {\r\n    if (nodeId === \"start\" || nodeId === \"end\") return true;\r\n\r\n    const node = nodes.find((n) => n.id === nodeId);\r\n    if (!node) {\r\n      showToast(`Node ${nodeId} not found.`);\r\n      return false;\r\n    }\r\n\r\n    if (node.data.action === \"Path\") {\r\n      const outgoingEdges = edges.filter((edge) => edge.source === nodeId && edge.conditionNodeId);\r\n      if (outgoingEdges.length === 0) {\r\n        showToast(`Path node ${node.data.displayLabel} must have at least one outgoing connection.`);\r\n        return false;\r\n      }\r\n\r\n      for (const edge of outgoingEdges) {\r\n        const conditionNodeId = edge.target;\r\n        const conditionNode = nodes.find((n) => n.id === conditionNodeId);\r\n        if (!conditionNode || conditionNode.data.action !== \"Condition\") {\r\n          showToast(`Invalid condition node connected to Path node ${node.data.displayLabel}.`);\r\n          return false;\r\n        }\r\n\r\n        const conditionMapping = mappings[conditionNodeId] || {};\r\n        const validPathOption = conditionMapping.pathOption || \"Rules\";\r\n        if (![\"Rules\", \"Always Run\", \"Fallback\"].includes(validPathOption)) {\r\n          showToast(`Condition node ${conditionNode.data.displayLabel} for Path node ${node.data.displayLabel} must have a valid path option (Rules, Always Run, or Fallback).`);\r\n          return false;\r\n        }\r\n        if (validPathOption === \"Rules\" && (!conditionMapping.conditions || conditionMapping.conditions.length === 0)) {\r\n          showToast(`Condition node ${conditionNode.data.displayLabel} for Path node ${node.data.displayLabel} must have at least one condition configured when using Rules.`);\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    } else if (node.data.action === \"Condition\") {\r\n      const conditionMapping = mappings[nodeId] || {};\r\n      const validPathOption = conditionMapping.pathOption || \"Rules\";\r\n      if (validPathOption === \"Rules\" && (!conditionMapping.conditions || conditionMapping.conditions.length === 0)) {\r\n        showToast(`Condition node ${node.data.displayLabel} must have at least one condition configured when using Rules.`);\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    const nodeMapping = mappings[nodeId] || {};\r\n    if (node.data.action === \"Create/Update\") {\r\n      if (!nodeMapping.salesforceObject || !nodeMapping.fieldMappings || nodeMapping.fieldMappings.length === 0) {\r\n        showToast(`No Salesforce object or complete mappings defined for node ${node.data.displayLabel}.`);\r\n        return false;\r\n      }\r\n      if (nodeMapping.enableConditions && (!nodeMapping.conditions || nodeMapping.conditions.length === 0)) {\r\n        showToast(`No complete conditions defined for node ${node.data.displayLabel} when conditions are enabled.`);\r\n        return false;\r\n      }\r\n      if (nodeMapping.returnLimit && (isNaN(nodeMapping.returnLimit) || nodeMapping.returnLimit < 1 || nodeMapping.returnLimit > 100)) {\r\n        showToast(`Return limit for node ${node.data.displayLabel} must be a number between 1 and 100.`);\r\n        return false;\r\n      }\r\n    } else if (node.data.action === \"Find\" || node.data.action === \"Filter\") {\r\n      if (!nodeMapping.salesforceObject || !nodeMapping.conditions || nodeMapping.conditions.length === 0) {\r\n        showToast(`No Salesforce object or complete conditions defined for node ${node.data.displayLabel}.`);\r\n        return false;\r\n      }\r\n      if (nodeMapping.conditions.length > 1 && !nodeMapping.logicType) {\r\n        showToast(`Logic type must be defined for node ${node.data.displayLabel} with multiple conditions.`);\r\n        return false;\r\n      }\r\n      if (nodeMapping.logicType === \"Custom\" && !nodeMapping.customLogic) {\r\n        showToast(`Custom logic expression must be provided for node ${node.data.displayLabel}.`);\r\n        return false;\r\n      }\r\n      if (nodeMapping.returnLimit && (isNaN(nodeMapping.returnLimit) || nodeMapping.returnLimit < 1 || nodeMapping.returnLimit > 100)) {\r\n        showToast(`Return limit for node ${node.data.displayLabel} must be a number between 1 and 100.`);\r\n        return false;\r\n      }\r\n    } else if (node.data.action === \"Loop\") {\r\n      if (!nodeMapping.loopConfig || !nodeMapping.loopConfig.loopCollection || !nodeMapping.loopConfig.currentItemVariableName) {\r\n        showToast(`Loop node ${node.data.displayLabel} must have a collection and current item variable name.`);\r\n        return false;\r\n      }\r\n      const findNodeIds = allNodeIds.filter((id) => nodes.find((n) => n.id === id && n.data.action === \"Find\"));\r\n      if (!findNodeIds.includes(nodeMapping.loopConfig.loopCollection)) {\r\n        showToast(`Invalid Find node ID in loop collection for Loop node ${node.data.displayLabel}: ${nodeMapping.loopConfig.loopCollection}. Available Find nodes: ${findNodeIds.join(', ') || 'none'}.`);\r\n        return false;\r\n      }\r\n      if (nodeMapping.loopConfig.maxIterations && (isNaN(nodeMapping.loopConfig.maxIterations) || nodeMapping.loopConfig.maxIterations < 1)) {\r\n        showToast(`Max iterations for Loop node ${node.data.displayLabel} must be a positive number.`);\r\n        return false;\r\n      }\r\n      if (nodeMapping.loopConfig.loopVariables && (typeof nodeMapping.loopConfig.loopVariables !== \"object\" ||\r\n        typeof nodeMapping.loopConfig.loopVariables.currentIndex !== \"boolean\" ||\r\n        typeof nodeMapping.loopConfig.loopVariables.counter !== \"boolean\" ||\r\n        ![\"0\", \"1\"].includes(nodeMapping.loopConfig.loopVariables.indexBase))) {\r\n        showToast(`Invalid loop variables configuration for Loop node ${node.data.displayLabel}.`);\r\n        return false;\r\n      }\r\n    } else if (node.data.action === \"Formatter\") {\r\n      if (!nodeMapping.formatterConfig || !nodeMapping.formatterConfig.inputField || !nodeMapping.formatterConfig.operation) {\r\n        showToast(`Formatter node ${node.data.displayLabel} must have an input field and operation defined.`);\r\n        return false;\r\n      }\r\n      if (nodeMapping.formatterConfig.formatType === \"date\") {\r\n        if ((nodeMapping.formatterConfig.operation === \"format_date\" || nodeMapping.formatterConfig.operation === \"format_datetime\" || nodeMapping.formatterConfig.operation === \"format_time\") && (!nodeMapping.formatterConfig.options?.format || !nodeMapping.formatterConfig.options?.timezone)) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a date format and timezone defined.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.operation === \"timezone_conversion\" && (!nodeMapping.formatterConfig.options?.timezone || !nodeMapping.formatterConfig.options?.targetTimezone)) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have source and target timezones defined.`);\r\n          return false;\r\n        }\r\n        if ((nodeMapping.formatterConfig.operation === \"add_date\" || nodeMapping.formatterConfig.operation === \"subtract_date\") && (!nodeMapping.formatterConfig.options?.unit || nodeMapping.formatterConfig.options?.value === undefined)) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a date unit and value defined.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.operation === \"date_difference\" && !nodeMapping.formatterConfig.inputField2 && !nodeMapping.formatterConfig.useCustomInput) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a second input field or use custom input for date difference.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.useCustomInput && !nodeMapping.formatterConfig.customValue) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a custom compare date defined.`);\r\n          return false;\r\n        }\r\n      }\r\n      if (nodeMapping.formatterConfig.formatType === \"number\") {\r\n        if (nodeMapping.formatterConfig.operation === \"locale_format\" && !nodeMapping.formatterConfig.options?.locale) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a locale defined.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.operation === \"currency_format\" && (!nodeMapping.formatterConfig.options?.currency || !nodeMapping.formatterConfig.options?.locale)) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a currency and locale defined.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.operation === \"round_number\" && nodeMapping.formatterConfig.options?.decimals === undefined) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have number of decimals defined.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.operation === \"phone_format\" && (!nodeMapping.formatterConfig.options?.countryCode || !nodeMapping.formatterConfig.options?.format)) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a country code and format defined.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.operation === \"math_operation\" && (!nodeMapping.formatterConfig.options?.operation || (!nodeMapping.formatterConfig.inputField2 && !nodeMapping.formatterConfig.useCustomInput))) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a math operation and second input field or custom value defined.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.useCustomInput && nodeMapping.formatterConfig.customValue === undefined) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a custom value defined for math operation.`);\r\n          return false;\r\n        }\r\n      }\r\n      if (nodeMapping.formatterConfig.formatType === \"text\") {\r\n        if (nodeMapping.formatterConfig.operation === \"replace\" && (!nodeMapping.formatterConfig.options?.searchValue || !nodeMapping.formatterConfig.options?.replaceValue)) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have search and replace values defined.`);\r\n          return false;\r\n        }\r\n        if (nodeMapping.formatterConfig.operation === \"split\" && (!nodeMapping.formatterConfig.options?.delimiter || !nodeMapping.formatterConfig.options?.index)) {\r\n          showToast(`Formatter node ${node.data.displayLabel} must have a delimiter and index defined.`);\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const saveAllConfiguration = async () => {\r\n    setIsSaving(true);\r\n    setSaveError(null);\r\n\r\n    const userId = sessionStorage.getItem('userId');\r\n    const instanceUrl = sessionStorage.getItem('instanceUrl');\r\n    console.log('userid--> ',userId);\r\n    console.log('instanceUrl--> ',instanceUrl);\r\n\r\n    if (!userId || !instanceUrl) {\r\n      showToast(\"Missing userId or instanceUrl. Please log in again.\", 'error');\r\n      setIsSaving(false);\r\n      return;\r\n    }\r\n\r\n    if (!token) {\r\n      const newToken = await fetchAccessToken(userId, instanceUrl);\r\n      if (!newToken) {\r\n        setIsSaving(false);\r\n        return;\r\n      }\r\n      setToken(newToken);\r\n    }\r\n\r\n    if (!token || token.split('.').length !== 3) {\r\n      showToast(\"Invalid authentication token format. Please log in again.\", 'error');\r\n      setIsSaving(false);\r\n      return;\r\n    }\r\n\r\n    for (const node of nodes) {\r\n      const isConnected = edges.some((edge) => edge.source === node.id || edge.target === node.id);\r\n      if (!isConnected && node.id !== \"start\" && node.id !== \"end\") {\r\n        showToast(`Node ${node.data.displayLabel} is not connected. Please connect all nodes before saving.`, 'error');\r\n        setIsSaving(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    const allMappings = [];\r\n    let maxOrder = 0;\r\n    for (const node of nodes) {\r\n      const nodeMapping = mappings[node.id] || {};\r\n      const incomingEdge = edges.find((e) => e.target === node.id);\r\n      const outgoingEdges = edges.filter((e) => e.source === node.id);\r\n      const previousNodeId = incomingEdge?.source;\r\n      const nextNodeIds = outgoingEdges.map((e) => e.target).filter((id, index, self) => self.indexOf(id) === index);\r\n\r\n      let actionType = nodeMapping.actionType || node.data.action;\r\n      if (node.id === \"start\") actionType = \"Start\";\r\n      else if (node.id === \"end\") actionType = \"End\";\r\n      else if (actionType === \"Create/Update\") actionType = \"CreateUpdate\";\r\n      else if (actionType === \"Find\") actionType = \"Find\";\r\n      else if (actionType === \"Filter\") actionType = \"Filter\";\r\n      else if (actionType === \"Path\") actionType = \"Path\";\r\n      else if (actionType === \"Loop\") actionType = \"Loop\";\r\n      else if (actionType === \"Formatter\") actionType = \"Formatter\";\r\n      else if (actionType === \"Condition\") actionType = \"Condition\";\r\n      else if (!actionType) actionType = node.data.action || \"Unknown\";\r\n\r\n      const order = node.data.order || (actionType !== \"End\" ? ++maxOrder : maxOrder + 1);\r\n      maxOrder = Math.max(maxOrder, order);\r\n\r\n      const mappingData = {\r\n        nodeId: node.id,\r\n        actionType,\r\n        salesforceObject: actionType === \"CreateUpdate\" || actionType === \"Find\" || actionType === \"Filter\" || (actionType === \"Condition\" && nodeMapping.pathOption === \"Rules\") ? nodeMapping.salesforceObject || \"\" : \"\",\r\n        fieldMappings: actionType === \"CreateUpdate\" ? nodeMapping.fieldMappings || [] : [],\r\n        conditions: actionType === \"Find\" || actionType === \"Filter\" || (actionType === \"CreateUpdate\" && nodeMapping.enableConditions) || (actionType === \"Condition\" && nodeMapping.pathOption === \"Rules\") ? nodeMapping.conditions || [] : [],\r\n        logicType: (actionType === \"Find\" || actionType === \"Filter\" || (actionType === \"CreateUpdate\" && nodeMapping.enableConditions) || (actionType === \"Condition\" && nodeMapping.pathOption === \"Rules\")) ? nodeMapping.logicType || \"AND\" : null,\r\n        customLogic: nodeMapping.logicType === \"Custom\" ? nodeMapping.customLogic || \"\" : \"\",\r\n        loopConfig: actionType === \"Loop\" ? nodeMapping.loopConfig || {} : undefined,\r\n        formatterConfig: actionType === \"Formatter\" ? nodeMapping.formatterConfig || {} : undefined,\r\n        enableConditions: actionType === \"CreateUpdate\" ? nodeMapping.enableConditions || false : undefined,\r\n        returnLimit: actionType === \"Find\" || actionType === \"Filter\" ? nodeMapping.returnLimit || \"\" : undefined,\r\n        sortField: actionType === \"Find\" || actionType === \"Filter\" ? nodeMapping.sortField || \"\" : undefined,\r\n        sortOrder: actionType === \"Find\" || actionType === \"Filter\" ? nodeMapping.sortOrder || \"ASC\" : undefined,\r\n        pathOption: actionType === \"Condition\" ? nodeMapping.pathOption || \"Rules\" : undefined,\r\n        nextNodeIds,\r\n        previousNodeId,\r\n        label: node.data.label,\r\n        order,\r\n        formVersionId,\r\n      };\r\n\r\n      allMappings.push(mappingData);\r\n    }\r\n\r\n    const allNodeIds = allMappings.map((m) => m.nodeId);\r\n    for (const mapping of allMappings) {\r\n      if (!validateNode(mapping.nodeId, allNodeIds)) {\r\n        setIsSaving(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    const headers = { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` };\r\n    const saveMappingsUrl = process.env.REACT_APP_SAVE_MAPPINGS_URL || \"https://q8en3hy1q7.execute-api.us-east-1.amazonaws.com/saveFieldMapping\";\r\n\r\n    try {\r\n      const payload = {\r\n        userId,\r\n        instanceUrl: instanceUrl.replace(/https?:\\/\\//, \"\"),\r\n        mappings: allMappings,\r\n      };\r\n\r\n      const response = await fetch(saveMappingsUrl, {\r\n        method: \"POST\",\r\n        headers,\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.error || `Failed to save configurations: ${response.status}`);\r\n\r\n      if (data.success) {\r\n        const updatedMappings = { ...mappings };\r\n        allMappings.forEach((mapping, index) => {\r\n          if (data.mappingIds && data.mappingIds[index]) {\r\n            updatedMappings[mapping.nodeId] = { ...mapping, id: data.mappingIds[index] };\r\n          }\r\n        });\r\n        setMappings(updatedMappings);\r\n        showToast(\"All configurations saved successfully!\", 'success');\r\n      } else {\r\n        throw new Error(`Save failed: ${data.message || \"Unknown error\"}`);\r\n      }\r\n    } catch (error) {\r\n      showToast(error.message || \"Failed to save configurations. Please check your network or contact support.\", 'error');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const initializeData = async () => {\r\n    setIsLoading(true);\r\n    setFetchError(null);\r\n\r\n    const userId = sessionStorage.getItem('userId');\r\n    const instanceUrl = sessionStorage.getItem('instanceUrl');\r\n    if (!userId || !instanceUrl || !formVersionId) {\r\n      showToast(\"Missing userId, instanceUrl, or formVersionId.\", 'error');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Fetch access token\r\n      const tokenToUse = await fetchAccessToken(userId, instanceUrl);\r\n      if (!tokenToUse) {\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      setToken(tokenToUse);\r\n\r\n      // Fetch form fields for the formVersionId\r\n      const formFieldsData = await fetchFormFields(userId, instanceUrl, formVersionId, tokenToUse);\r\n      setFormFields(formFieldsData);\r\n\r\n    } catch (error) {\r\n      showToast(`Initialization failed: ${error.message}`, 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Initialize only if formFields or mappings are not set\r\n    if (!formFields.length || !Object.keys(mappings).length) {\r\n      initializeData();\r\n    }\r\n  }, [formFields, mappings]);\r\n\r\n  const onDragStart = (event, nodeType, action) => {\r\n    event.dataTransfer.setData(\"application/reactflow-type\", nodeType);\r\n    event.dataTransfer.setData(\"application/reactflow-id\", action);\r\n    event.dataTransfer.effectAllowed = \"move\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-gray-50 font-sans relative\">\r\n      <AnimatePresence>\r\n        {isLoading && (\r\n          <motion.div\r\n            className=\"fixed inset-0 flex items-center justify-center bg-gray-50 bg-opacity-80 z-50\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <div className=\"flex flex-col items-center\">\r\n              <div className=\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-500\"></div>\r\n              <p className=\"mt-4 text-gray-700 text-lg font-medium\">Loading Editor...</p>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {!isLoading && (\r\n        <>\r\n          <motion.header\r\n            className=\"bg-white p-4 flex justify-between items-center shadow-md h-16 sticky top-0 z-10 border-b border-gray-200\"\r\n            initial={{ y: -100, opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <h1 className=\"text-xl font-bold text-gray-800 tracking-tight\">\r\n              Field Mapping\r\n            </h1>\r\n            <motion.button\r\n              onClick={saveAllConfiguration}\r\n              disabled={isSaving}\r\n              className={`px-5 py-2 rounded-md font-medium text-white shadow-sm transition-all duration-200 ease-in-out\r\n                ${isSaving\r\n                  ? \"bg-gray-400 cursor-not-allowed\"\r\n                  : \"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\r\n                }`}\r\n              whileHover={{ scale: 1.02 }}\r\n              whileTap={{ scale: 0.98 }}\r\n            >\r\n              {isSaving ? \"Saving...\" : \"Save All Configuration\"}\r\n            </motion.button>\r\n          </motion.header>\r\n\r\n          <div className=\"flex flex-1 overflow-hidden\">\r\n            <Sidebar onDragStart={onDragStart} />\r\n            <div className=\"flex-1 relative z-0 h-[calc(100vh-64px)] overflow-hidden bg-gray-100\">\r\n              <ReactFlowProvider>\r\n                <FlowDesigner\r\n                  initialNodes={initialNodes}\r\n                  initialEdges={initialEdges}\r\n                  setSelectedNode={setSelectedNode}\r\n                  setNodes={setNodes}\r\n                  setEdges={setEdges}\r\n                />\r\n              </ReactFlowProvider>\r\n            </div>\r\n\r\n            {selectedNode && [\"Create/Update\", \"Find\", \"Filter\", \"Loop\", \"Formatter\", \"Condition\"].includes(selectedNode.data.action) && (\r\n              <ActionPanel\r\n                nodeId={selectedNode.id}\r\n                nodeType={selectedNode.data.action}\r\n                formFields={formFields}\r\n                salesforceObjects={salesforceObjects}\r\n                mappings={mappings}\r\n                setMappings={setMappings}\r\n                setSalesforceObjects={setSalesforceObjects}\r\n                onClose={() => setSelectedNode(null)}\r\n                nodeLabel={selectedNode.data.displayLabel}\r\n                nodes={nodes}\r\n                edges={edges}\r\n              />\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      <AnimatePresence>\r\n        {saveError && (\r\n          <motion.div\r\n            className={`fixed top-24 right-4 ${saveError.type === 'success' ? 'bg-green-600' : 'bg-red-600'} text-white px-5 py-3 rounded-md shadow-lg flex items-center space-x-3 z-50 max-w-sm`}\r\n            initial={{ x: \"100%\", opacity: 0 }}\r\n            animate={{ x: 0, opacity: 1 }}\r\n            exit={{ x: \"100%\", opacity: 0 }}\r\n            transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n            <p className=\"font-medium text-sm flex-grow\">{saveError.message}</p>\r\n            <button onClick={() => setSaveError(null)} className=\"p-1 rounded-full hover:bg-red-700 transition-colors\">\r\n              <XMarkIcon className=\"h-4 w-4\" />\r\n            </button>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MappingFields;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}