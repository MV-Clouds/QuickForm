{"ast":null,"code":"import _objectSpread from\"C:/Users/MVclouds/Desktop/QuickForm/Merged Mapping QF/QuickForm/QuickForm-Romit-Kajal-Merge/quick-form-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate,useLocation}from'react-router-dom';import{MdUndo,MdRedo}from'react-icons/md';import{FaEye}from'react-icons/fa';import useUndo from'use-undo';import FormBuilder from'./FormBuilder';import Sidebar from'./Sidebar';import MainMenuBar from'./MainMenuBar';import FieldEditor from'./FieldEditor';import'rsuite/dist/rsuite.min.css';import{encrypt}from'./crypto';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function MainFormBuilder(){var _location$state,_location$state2,_location$state3,_fields$find;const{formVersionId}=useParams();const[formId,setFormId]=useState(null);const[selectedVersionId,setSelectedVersionId]=useState(formVersionId);const[isEditable,setIsEditable]=useState(true);const[isFirstSave,setIsFirstSave]=useState(false);const[isLoadingForm,setIsLoadingForm]=useState(false);const[formVersions,setFormVersions]=useState([]);const[isNewVersion,setIsNewVersion]=useState(false);const[fetchFormError,setFetchFormError]=useState(null);const[currentFormVersion,setCurrentFormVersion]=useState(null);const location=useLocation();const navigate=useNavigate();const[showFormNamePopup,setShowFormNamePopup]=useState(!formVersionId);const[formName,setFormName]=useState('');const[formNameError,setFormNameError]=useState(null);const[hasChanges,setHasChanges]=useState(false);const[selectedObjects,setSelectedObjects]=useState(((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.selectedObjects)||[]);const[selectedFields,setSelectedFields]=useState(((_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.selectedFields)||{});const[fieldsData,setFieldsData]=useState(((_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.fieldsData)||{});const[fieldsState,{set:setFields,undo,redo,canUndo,canRedo}]=useUndo([{id:'default-header',type:'header',heading:'Contact Form',alignment:'center'}]);const[showSidebar,setShowSidebar]=useState(true);const[isSidebarOpen,setIsSidebarOpen]=useState(true);const[selectedFieldId,setSelectedFieldId]=useState(null);const[selectedSectionSide,setSelectedSectionSide]=useState(null);const[selectedFooter,setSelectedFooter]=useState(null);const[clipboard,setClipboard]=useState({field:null,operation:null});const[isSaving,setIsSaving]=useState(false);const[saveError,setSaveError]=useState(null);const fields=fieldsState.present;const fetchAccessToken=async(userId,instanceUrl)=>{try{const response=await fetch(process.env.REACT_APP_GET_ACCESS_TOKEN_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId,instanceUrl})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Failed to fetch access token');}return data.access_token;}catch(error){console.error('Error fetching access token:',error);return null;}};const handlePublish=async()=>{try{setIsLoadingForm(true);setHasChanges(false);const userId=sessionStorage.getItem('userId');const instanceUrl=sessionStorage.getItem('instanceUrl');const token=await fetchAccessToken(userId,instanceUrl);const linkData={userId,instanceUrl,formVersionId:selectedVersionId};const encryptedLinkId=encrypt(JSON.stringify(linkData));const publishLink=\"https://d2bri1qui9cr5s.cloudfront.net/public-form/\".concat(encodeURIComponent(encryptedLinkId));const{formVersion,formFields}=prepareFormData(false);formVersion.Stage__c='Publish';formVersion.Id=selectedVersionId;formVersion.Form__c=formId;formVersion.Publish_Link__c=publishLink;const response=await fetch(process.env.REACT_APP_SAVE_FORM_URL,{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({userId,instanceUrl,formData:{formVersion,formFields}})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Failed to publish form');}await fetchFormData(userId,instanceUrl);}catch(error){console.error('Error publishing form:',error);setFetchFormError(error.message||'Failed to publish form');}finally{setIsLoadingForm(false);}};const fetchFormData=async(userId,instanceUrl)=>{try{setIsLoadingForm(true);setFetchFormError(null);const cleanedInstanceUrl=instanceUrl.replace(/https?:\\/\\//,'');const response=await fetch(process.env.REACT_APP_FETCH_METADATA_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId,instanceUrl:cleanedInstanceUrl})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Failed to fetch metadata');}let formRecords=[];if(data.FormRecords){try{formRecords=JSON.parse(data.FormRecords);}catch(e){console.warn('Failed to parse FormRecords:',e);}}let formVersion=null;let targetFormId=null;for(const form of formRecords){formVersion=form.FormVersions.find(version=>version.Source==='Form_Version__c'&&version.Id===formVersionId);if(formVersion){formVersion.Form__c=form.Id;targetFormId=form.Id;setFormVersions(form.FormVersions);setFormId(form.Id);break;}}if(!formVersion){throw new Error(\"Form version with Id \".concat(formVersionId,\" not found\"));}setIsEditable(formVersion.Stage__c==='Draft');setCurrentFormVersion(formVersion);const formFields=formVersion.Fields||[];const headerField={id:'default-header',type:'header',heading:formVersion.Name||'Contact Form',alignment:'center'};const pages={};formFields.forEach(field=>{const pageNumber=field.Page_Number__c||1;if(!pages[pageNumber]){pages[pageNumber]=[];}pages[pageNumber].push(field);});Object.keys(pages).forEach(pageNum=>{pages[pageNum].sort((a,b)=>(a.Order_Number__c||0)-(b.Order_Number__c||0));});const reconstructedFields=[];Object.keys(pages).sort((a,b)=>a-b).forEach((pageNum,index)=>{const fieldsInPage=pages[pageNum].map(field=>{const properties=JSON.parse(field.Properties__c||'{}');return _objectSpread(_objectSpread({},properties),{},{id:field.Unique_Key__c});});reconstructedFields.push(...fieldsInPage);if(index<Object.keys(pages).length-1){reconstructedFields.push({id:\"pagebreak-\".concat(pageNum),type:'pagebreak'});}});setFields([headerField,...reconstructedFields]);}catch(error){console.error('Error fetching form data:',error);setFetchFormError(error.message||'Failed to load form data');navigate('/home');}finally{setIsLoadingForm(false);}};const handleVersionChange=e=>{const newVersionId=e.target.value;setSelectedVersionId(newVersionId);const userId=sessionStorage.getItem('userId');const instanceUrl=sessionStorage.getItem('instanceUrl');if(userId&&instanceUrl){fetchFormData(userId,instanceUrl,newVersionId);navigate(\"/form-builder/\".concat(newVersionId));}};useEffect(()=>{console.log(fieldsState);},[fieldsState]);useEffect(()=>{const userId=sessionStorage.getItem('userId');const instanceUrl=sessionStorage.getItem('instanceUrl');if(!userId||!instanceUrl){setFetchFormError('Missing userId or instanceUrl. Please log in.');return;}if(formVersionId){setSelectedVersionId(formVersionId);fetchFormData(userId,instanceUrl,formVersionId);}else{setFields([{id:'default-header',type:'header',heading:'Contact Form',alignment:'center'}]);}},[formVersionId]);useEffect(()=>{if(currentFormVersion){const originalFields=currentFormVersion.Fields||[];const currentFields=prepareFormData().formFields;const hasFieldChanges=JSON.stringify(originalFields)!==JSON.stringify(currentFields);setHasChanges(hasFieldChanges);}},[fields]);const handleFormNameSubmit=async()=>{if(!formName.trim()){setFormNameError('Form name is required.');return;}setIsSaving(true);setFormNameError(null);try{const userId=sessionStorage.getItem('userId');const instanceUrl=sessionStorage.getItem('instanceUrl');const token=await fetchAccessToken(userId,instanceUrl);if(!token)throw new Error('Failed to obtain access token.');const{formVersion,formFields}=prepareFormData(true);const response=await fetch(process.env.REACT_APP_SAVE_FORM_URL,{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({userId,instanceUrl:instanceUrl.replace(/https?:\\/\\//,''),formData:{formVersion,formFields}})});const data=await response.json();console.log('Form creation response:',data);if(!response.ok)throw new Error(data.error||'Failed to create form.');const newFormVersionId=data.formVersionId;setCurrentFormVersion(_objectSpread(_objectSpread({},formVersion),{},{Id:newFormVersionId,Fields:formFields}));setIsFirstSave(true);setShowFormNamePopup(false);navigate(\"/form-builder/\".concat(newFormVersionId));}catch(error){console.error('Error creating form:',error);setFormNameError(error.message||'Failed to create form.');}finally{setIsSaving(false);}};const prepareFormData=function(){let isNewForm=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const headerField=fields.find(f=>f.type==='header');const nonHeaderFields=fields.filter(f=>f.type!=='header');const pages=[];let currentPage=[];let pageNumber=1;nonHeaderFields.forEach(field=>{if(field.type==='pagebreak'){pages.push({fields:currentPage,pageNumber});pageNumber++;currentPage=[];}else{currentPage.push(field);}});if(currentPage.length>0||pages.length===0){pages.push({fields:currentPage,pageNumber});}const formVersion={Name:isNewForm?formName:(headerField===null||headerField===void 0?void 0:headerField.heading)||'Contact Form',Description__c:'',Stage__c:'Draft',Publish_Link__c:''};if(!isNewForm&&currentFormVersion!==null&&currentFormVersion!==void 0&&currentFormVersion.Form__c){formVersion.Form__c=currentFormVersion.Form__c;}if(isNewForm){formVersion.Version__c='1';}else if(isFirstSave&&formVersionId){formVersion.Id=formVersionId;formVersion.Version__c='1';}else if(formVersionId&&currentFormVersion&&hasChanges&&!formVersion.Stage__c==='Draft'){const currentVersionNum=parseFloat(currentFormVersion.Version__c)||1;formVersion.Version__c=(currentVersionNum+1).toFixed(0);}else if(formVersionId){formVersion.Id=formVersionId;formVersion.Version__c=(currentFormVersion===null||currentFormVersion===void 0?void 0:currentFormVersion.Version__c)||'1';}else{formVersion.Version__c='1';}const formFields=pages.flatMap(page=>page.fields.map((field,index)=>({Name:field.label||field.type.charAt(0).toUpperCase()+field.type.slice(1),Field_Type__c:field.type,Page_Number__c:page.pageNumber,Order_Number__c:index+1,Properties__c:JSON.stringify(field),Unique_Key__c:field.id})));return{formVersion,formFields};};const saveFormToSalesforce=async()=>{if(!isEditable)return;setIsSaving(true);setSaveError(null);try{const userId=sessionStorage.getItem('userId');const instanceUrl=sessionStorage.getItem('instanceUrl');if(!userId||!instanceUrl)throw new Error('Missing userId or instanceUrl.');const token=await fetchAccessToken(userId,instanceUrl);if(!token)throw new Error('Failed to obtain access token.');const{formVersion,formFields}=prepareFormData();const response=await fetch(process.env.REACT_APP_SAVE_FORM_URL,{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({userId,instanceUrl:instanceUrl.replace(/https?:\\/\\//,''),formData:{formVersion,formFields}})});const data=await response.json();if(!response.ok){throw new Error(JSON.stringify(data)||'Failed to save form.');}alert('Form saved successfully!');if(hasChanges||!formVersion.Id){const newFormVersionId=data.formVersionId;setCurrentFormVersion(_objectSpread(_objectSpread({},formVersion),{},{Id:newFormVersionId,Fields:formFields}));setSelectedVersionId(newFormVersionId);navigate(\"/form-builder/\".concat(newFormVersionId));setHasChanges(false);}else{setCurrentFormVersion(_objectSpread(_objectSpread({},formVersion),{},{Id:formVersionId,Fields:formFields}));}setIsFirstSave(false);}catch(error){console.error('Error saving form:',error);setSaveError(error.message||'Failed to save form.');}finally{setIsSaving(false);}};const getDefaultValidation=fieldType=>{const field=fieldType.toLowerCase().replace(/\\s+/g,'');const validations={fullname:{pattern:\"^[a-zA-Z\\\\s'-]+$\",description:\"Only letters, spaces, hyphens, and apostrophes allowed.\"},phonenumber:{pattern:\"^\\\\+?[0-9]{7,15}$\",description:\"Must be a valid phone number (7-15 digits, optional '+').\"},email:{pattern:\"^[^@\\\\s]+@[^@\\\\s]+\\\\.[^@\\\\s]+$\",description:\"Must be a valid email (e.g., user@example.com).\"},address:{pattern:\"^[\\\\w\\\\s\\\\-\\\\.,#]+$\",description:\"Alphanumeric, spaces, hyphens, commas, and periods allowed.\"},fileupload:{pattern:\".*\\\\.(jpg|jpeg|png|gif|pdf|doc|docx)$\",description:\"Only JPG, PNG, GIF, PDF, DOC, or DOCX files allowed.\"},signature:{pattern:\"^[\\\\w\\\\s\\\\-\\\\.,#]+$\",description:\"Must be a valid signature input.\"},termsofservice:{pattern:\"^true$\",description:\"Must be accepted (checked).\"},link:{pattern:\"^(https?:\\\\/\\\\/)?[\\\\w.-]+\\\\.[a-z]{2,}(\\\\/\\\\S*)?$\",description:\"Must be a valid URL (e.g., https://example.com).\"},date:{pattern:\"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\",description:\"Must be in YYYY-MM-DD format.\"},datetime:{pattern:\"^\\\\d{4}-\\\\d{2}-\\\\d{2} \\\\d{2}:\\\\d{2}$\",description:\"Must be in YYYY-MM-DD HH:MM format.\"},time:{pattern:\"^\\\\d{2}:\\\\d{2}$\",description:\"Must be in HH:MM format.\"},emojirating:{pattern:\"^[1-5]$\",description:\"Rating must be between 1 and 5.\"},starrating:{pattern:\"^[1-5]$\",description:\"Rating must be between 1 and 5.\"},scalerating:{pattern:\"^[0-5]$\",description:\"Must be a rating between 0 and 5.\"},shorttext:{pattern:\"^.{1,255}$\",description:\"Maximum 255 characters allowed.\"},longtext:{pattern:\"^.{1,1000}$\",description:\"Maximum 1000 characters allowed.\"},number:{pattern:\"^[0-9]+$\",description:\"Only numbers allowed.\"},checkbox:{pattern:\"^true|false$\",description:\"Must be checked (true) or unchecked (false).\"},displaytext:{pattern:\".*\",description:\"Display-only text (no validation needed).\"},price:{pattern:\"^\\\\d+(\\\\.\\\\d{1,2})?$\",description:\"Must be a valid price (e.g., 10 or 10.99).\"},radiobutton:{pattern:\".*\",description:\"Must select one of the available options.\"},togglebutton:{pattern:\"^true|false$\",description:\"Must be toggled (true) or untoggled (false).\"},dropdownelements:{pattern:\".*\",description:\"Must select one of the available options.\"},imageuploader:{pattern:\".*\\\\.(jpg|jpeg|png|gif|pdf|doc|docx)$\",description:\"Only images (JPG, PNG, GIF), PDF, or Word documents allowed.\"},section:{pattern:\".*\",description:\"Display-only section (no validation needed).\"},default:{pattern:\".*\",description:\"No specific validation rules.\"}};return validations[field]||validations['default'];};const handleDrop=function(fieldType,pageIndex,dropIndex){let fieldId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let sectionId=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;let sectionSide=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;let newField=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;setHasChanges(true);let updatedFields=[...fields];const pages=[];let currentPageFields=[];updatedFields.forEach(field=>{if(field.type==='pagebreak'){pages.push({fields:currentPageFields});currentPageFields=[];}else{currentPageFields.push(field);}});pages.push({fields:currentPageFields});if(pageIndex>=pages.length){pages.push({fields:[]});}const targetPage=pages[pageIndex];const insertIndex=dropIndex!==null&&dropIndex!==undefined?dropIndex+1:targetPage.fields.length;if(newField&&fieldId){pages.forEach(page=>{page.fields=page.fields.filter(f=>f.id!==fieldId);});targetPage.fields.splice(insertIndex,0,_objectSpread(_objectSpread({},newField),{},{isCut:false}));setSelectedFieldId(newField.id);setSelectedSectionSide(newField.sectionSide||null);setShowSidebar(false);}else if(newField&&!fieldId){targetPage.fields.splice(insertIndex,0,newField);setSelectedFieldId(newField.id);setSelectedSectionSide(newField.sectionSide||null);setShowSidebar(false);}else if(fieldType){const newFieldId=\"field-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9));const newFieldObj={id:newFieldId,type:fieldType,sectionId:sectionId||null,sectionSide:sectionSide||null,validation:getDefaultValidation(fieldType)// <-- Add this line to include validation key\n};targetPage.fields.splice(insertIndex,0,newFieldObj);}const flattenedFields=[];pages.forEach((page,idx)=>{flattenedFields.push(...page.fields);if(idx<pages.length-1){flattenedFields.push({id:\"pagebreak-\".concat(idx),type:'pagebreak'});}});const headerField=fields.find(f=>f.type==='header');const finalFields=headerField?[headerField,...flattenedFields.filter(f=>f.type!=='header')]:flattenedFields;setFields(finalFields);};const handleReorder=(fromIndex,toIndex,pageIndex)=>{setHasChanges(true);const pages=[];let currentPage=[];const nonHeaderFields=fields.filter(f=>f.type!=='header');nonHeaderFields.forEach(field=>{if(field.type==='pagebreak'){pages.push({fields:currentPage});currentPage=[];}else{currentPage.push(field);}});if(currentPage.length>0||pages.length===0){pages.push({fields:currentPage});}const targetPageFields=[...pages[pageIndex].fields];const[movedField]=targetPageFields.splice(fromIndex,1);targetPageFields.splice(toIndex,0,movedField);pages[pageIndex].fields=targetPageFields;const flattenedFields=pages.flatMap((page,idx)=>[...page.fields,...(idx<pages.length-1?[{id:\"pagebreak-\".concat(idx),type:'pagebreak'}]:[])]);const headerField=fields.find(f=>f.type==='header');setFields(headerField?[headerField,...flattenedFields]:flattenedFields);};const handleUpdateField=(fieldId,updates)=>{setHasChanges(true);const updatedFields=fields.map(field=>{if(field.id===fieldId){return _objectSpread(_objectSpread({},field),updates);}if(field.type==='section'){var _field$leftField,_field$rightField;if(((_field$leftField=field.leftField)===null||_field$leftField===void 0?void 0:_field$leftField.id)===fieldId){return _objectSpread(_objectSpread({},field),{},{leftField:_objectSpread(_objectSpread({},field.leftField),updates)});}if(((_field$rightField=field.rightField)===null||_field$rightField===void 0?void 0:_field$rightField.id)===fieldId){return _objectSpread(_objectSpread({},field),{},{rightField:_objectSpread(_objectSpread({},field.rightField),updates)});}}return field;});setFields(updatedFields);};const handleDeleteField=function(fieldId){let showSidebarAfter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;setHasChanges(true);const updatedFields=fields.map(field=>{if(field.type==='section'){var _field$leftField2,_field$rightField2;if(((_field$leftField2=field.leftField)===null||_field$leftField2===void 0?void 0:_field$leftField2.id)===fieldId){return _objectSpread(_objectSpread({},field),{},{leftField:null});}if(((_field$rightField2=field.rightField)===null||_field$rightField2===void 0?void 0:_field$rightField2.id)===fieldId){return _objectSpread(_objectSpread({},field),{},{rightField:null});}}return field;}).filter(field=>field.id!==fieldId);setFields(updatedFields);if(showSidebarAfter){setSelectedFieldId(null);setSelectedSectionSide(null);setSelectedFooter(null);setShowSidebar(true);}};const handleDeletePage=pageIndex=>{setHasChanges(true);const pages=[];let currentPage=[];const nonHeaderFields=fields.filter(f=>f.type!=='header');nonHeaderFields.forEach(field=>{if(field.type==='pagebreak'){pages.push({fields:currentPage});currentPage=[];}else{currentPage.push(field);}});if(currentPage.length>0||pages.length===0){pages.push({fields:currentPage});}if(pages.length<=1)return;pages.splice(pageIndex,1);const flattenedFields=pages.flatMap((page,idx)=>[...page.fields,...(idx<pages.length-1?[{id:\"pagebreak-\".concat(idx),type:'pagebreak'}]:[])]);const headerField=fields.find(f=>f.type==='header');setFields(headerField?[headerField,...flattenedFields]:flattenedFields);};const handleAddPage=()=>{setHasChanges(true);setFields(prevFields=>{const nonHeaderFields=prevFields.filter(f=>f.type!=='header');const headerField=prevFields.find(f=>f.type==='header');const updatedFields=[...prevFields,{id:\"pagebreak-\".concat(nonHeaderFields.length),type:'pagebreak'}];return headerField?[headerField,...updatedFields.filter(f=>f.type!=='header')]:updatedFields;});};const handleCut=field=>{setHasChanges(true);setClipboard({field,operation:'cut'});handleUpdateField(field.id,{isCut:true});};const handleCopy=field=>{setClipboard({field,operation:'copy'});};const handlePaste=(pageIndex,dropIndex,sectionId,sectionSide)=>{setHasChanges(true);if(!clipboard.field)return;const newField=_objectSpread(_objectSpread({},clipboard.field),{},{id:\"field-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9)),isCut:false,sectionId:sectionId||null,sectionSide:sectionSide||null});if(clipboard.operation==='cut'){handleDeleteField(clipboard.field.id,false);}handleDrop(null,pageIndex,dropIndex,null,sectionId,sectionSide,newField);setClipboard({field:null,operation:null});};const toggleSidebar=()=>{setIsSidebarOpen(!isSidebarOpen);};const getSelectedField=()=>{if(!selectedFieldId)return null;for(const field of fields){if(field.id===selectedFieldId){return field.type==='section'?null:field;}if(field.type==='section'){var _field$leftField3,_field$rightField3;if(((_field$leftField3=field.leftField)===null||_field$leftField3===void 0?void 0:_field$leftField3.id)===selectedFieldId)return field.leftField;if(((_field$rightField3=field.rightField)===null||_field$rightField3===void 0?void 0:_field$rightField3.id)===selectedFieldId)return field.rightField;}}return null;};const selectedField=getSelectedField();return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-screen\",children:[/*#__PURE__*/_jsx(MainMenuBar,{isSidebarOpen:isSidebarOpen,toggleSidebar:toggleSidebar,selectedObjects:selectedObjects,selectedFields:selectedFields,fieldsData:fieldsData,formVersionId:selectedVersionId}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col relative h-screen transition-all duration-300 \".concat(isSidebarOpen?'ml-64':'ml-16'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#6A9AB0] text-white h-1/3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white h-2/3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-0 inset-x-1 flex flex-col px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-white p-4 w-full flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-white\",children:((_fields$find=fields.find(f=>f.type==='header'))===null||_fields$find===void 0?void 0:_fields$find.heading)||'Contact Form'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-100\",children:\"Define the form structure\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedVersionId||'',onChange:handleVersionChange,className:\"p-2 bg-white text-black rounded-md\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select Version\"}),formVersions.map(version=>/*#__PURE__*/_jsxs(\"option\",{value:version.Id,children:[\"Version \",version.Version__c,\" (\",version.Stage__c,\")\"]},version.Id))]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:undo,disabled:!canUndo,className:\"p-2 rounded \".concat(!canUndo?'text-gray-300 cursor-not-allowed':'text-white hover:bg-blue-700'),title:\"Undo\",children:/*#__PURE__*/_jsx(MdUndo,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:redo,disabled:!canRedo,className:\"p-2 rounded \".concat(!canRedo?'text-gray-300 cursor-not-allowed':'text-white hover:bg-blue-700'),title:\"Redo\",children:/*#__PURE__*/_jsx(MdRedo,{size:18})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 rounded text-white hover:bg-blue-700\",title:\"Preview\",children:/*#__PURE__*/_jsx(FaEye,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddPage,className:\"p-2 bg-blue-900 text-white rounded hover:bg-blue-100 font-medium\",title:\"Add Page\",children:\"Add Page\"}),((currentFormVersion===null||currentFormVersion===void 0?void 0:currentFormVersion.Stage__c)==='Draft'||(currentFormVersion===null||currentFormVersion===void 0?void 0:currentFormVersion.Stage__c)==='Locked')&&/*#__PURE__*/_jsx(\"button\",{onClick:handlePublish,disabled:isLoadingForm||(currentFormVersion===null||currentFormVersion===void 0?void 0:currentFormVersion.Stage__c)==='Publish',className:\"p-2 bg-green-500 text-white rounded-md disabled:bg-gray-400\",children:\"Publish\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveFormToSalesforce,disabled:isSaving||(currentFormVersion===null||currentFormVersion===void 0?void 0:currentFormVersion.Stage__c)!=='Draft',className:\"p-2 bg-blue-900 text-white rounded font-medium flex items-center gap-2 \".concat(isSaving?'opacity-50 cursor-not-allowed':'hover:bg-blue-100'),title:\"Save Form\",children:isSaving?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Saving...\"]}):'Save Form'})]})]}),saveError&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mt-2\",children:saveError}),fetchFormError&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mt-2\",children:fetchFormError}),isLoadingForm?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-8 w-8 text-blue-600\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3/4 pr-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-transparent rounded-lg h-full overflow-y-auto pt-4\",children:/*#__PURE__*/_jsx(FormBuilder,{fields:fields,onDrop:handleDrop,onReorder:handleReorder,onUpdateField:handleUpdateField,onDeleteField:handleDeleteField,onDeletePage:handleDeletePage,showSidebar:showSidebar,setShowSidebar:setShowSidebar,setSelectedFieldId:setSelectedFieldId,setSelectedSectionSide:setSelectedSectionSide,setSelectedFooter:setSelectedFooter,selectedFieldId:selectedFieldId,selectedSectionSide:selectedSectionSide,setClipboard:setClipboard,clipboard:clipboard})})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 pl-2\",children:showSidebar&&!selectedFieldId&&!selectedFooter?/*#__PURE__*/_jsx(Sidebar,{}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg\",children:(selectedFieldId||selectedFooter)&&/*#__PURE__*/_jsx(FieldEditor,{selectedField:selectedField,selectedFooter:selectedFooter,onUpdateField:handleUpdateField,onDeleteField:handleDeleteField,onClose:()=>{setSelectedFieldId(null);setSelectedSectionSide(null);setSelectedFooter(null);setShowSidebar(true);},fields:fields})})})]})]})]}),showFormNamePopup&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Enter Form Name\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/home'),className:\"text-gray-500 hover:text-gray-700\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formName,onChange:e=>setFormName(e.target.value),placeholder:\"Form Name\",className:\"w-full p-2 border rounded-md mb-4\"}),formNameError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-4\",children:formNameError}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFormNameSubmit,disabled:isSaving,className:\"w-full p-2 bg-blue-600 text-white rounded-md \".concat(isSaving?'opacity-50':'hover:bg-blue-700'),children:isSaving?'Creating...':'Create Form'})]})})]});}export default MainFormBuilder;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useLocation","MdUndo","MdRedo","FaEye","useUndo","FormBuilder","Sidebar","MainMenuBar","FieldEditor","encrypt","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MainFormBuilder","_location$state","_location$state2","_location$state3","_fields$find","formVersionId","formId","setFormId","selectedVersionId","setSelectedVersionId","isEditable","setIsEditable","isFirstSave","setIsFirstSave","isLoadingForm","setIsLoadingForm","formVersions","setFormVersions","isNewVersion","setIsNewVersion","fetchFormError","setFetchFormError","currentFormVersion","setCurrentFormVersion","location","navigate","showFormNamePopup","setShowFormNamePopup","formName","setFormName","formNameError","setFormNameError","hasChanges","setHasChanges","selectedObjects","setSelectedObjects","state","selectedFields","setSelectedFields","fieldsData","setFieldsData","fieldsState","set","setFields","undo","redo","canUndo","canRedo","id","type","heading","alignment","showSidebar","setShowSidebar","isSidebarOpen","setIsSidebarOpen","selectedFieldId","setSelectedFieldId","selectedSectionSide","setSelectedSectionSide","selectedFooter","setSelectedFooter","clipboard","setClipboard","field","operation","isSaving","setIsSaving","saveError","setSaveError","fields","present","fetchAccessToken","userId","instanceUrl","response","fetch","process","env","REACT_APP_GET_ACCESS_TOKEN_URL","method","headers","body","JSON","stringify","data","json","ok","Error","error","access_token","console","handlePublish","sessionStorage","getItem","token","linkData","encryptedLinkId","publishLink","concat","encodeURIComponent","formVersion","formFields","prepareFormData","Stage__c","Id","Form__c","Publish_Link__c","REACT_APP_SAVE_FORM_URL","Authorization","formData","fetchFormData","message","cleanedInstanceUrl","replace","REACT_APP_FETCH_METADATA_URL","formRecords","FormRecords","parse","e","warn","targetFormId","form","FormVersions","find","version","Source","Fields","headerField","Name","pages","forEach","pageNumber","Page_Number__c","push","Object","keys","pageNum","sort","a","b","Order_Number__c","reconstructedFields","index","fieldsInPage","map","properties","Properties__c","_objectSpread","Unique_Key__c","length","handleVersionChange","newVersionId","target","value","log","originalFields","currentFields","hasFieldChanges","handleFormNameSubmit","trim","newFormVersionId","isNewForm","arguments","undefined","f","nonHeaderFields","filter","currentPage","Description__c","Version__c","currentVersionNum","parseFloat","toFixed","flatMap","page","label","charAt","toUpperCase","slice","Field_Type__c","saveFormToSalesforce","alert","getDefaultValidation","fieldType","toLowerCase","validations","fullname","pattern","description","phonenumber","email","address","fileupload","signature","termsofservice","link","date","datetime","time","emojirating","starrating","scalerating","shorttext","longtext","number","checkbox","displaytext","price","radiobutton","togglebutton","dropdownelements","imageuploader","section","default","handleDrop","pageIndex","dropIndex","fieldId","sectionId","sectionSide","newField","updatedFields","currentPageFields","targetPage","insertIndex","splice","isCut","newFieldId","Date","now","Math","random","toString","substr","newFieldObj","validation","flattenedFields","idx","finalFields","handleReorder","fromIndex","toIndex","targetPageFields","movedField","handleUpdateField","updates","_field$leftField","_field$rightField","leftField","rightField","handleDeleteField","showSidebarAfter","_field$leftField2","_field$rightField2","handleDeletePage","handleAddPage","prevFields","handleCut","handleCopy","handlePaste","toggleSidebar","getSelectedField","_field$leftField3","_field$rightField3","selectedField","className","children","onChange","disabled","onClick","title","size","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","onDrop","onReorder","onUpdateField","onDeleteField","onDeletePage","onClose","placeholder"],"sources":["C:/Users/MVclouds/Desktop/QuickForm/Merged Mapping QF/QuickForm/QuickForm-Romit-Kajal-Merge/quick-form-app/src/components/form-builder-with-versions/MainFormBuilder.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { MdUndo, MdRedo } from 'react-icons/md';\r\nimport { FaEye } from 'react-icons/fa';\r\nimport useUndo from 'use-undo';\r\nimport FormBuilder from './FormBuilder';\r\nimport Sidebar from './Sidebar';\r\nimport MainMenuBar from './MainMenuBar';\r\nimport FieldEditor from './FieldEditor';\r\nimport 'rsuite/dist/rsuite.min.css';\r\nimport { encrypt } from './crypto';\r\n\r\nfunction MainFormBuilder() {\r\n  const { formVersionId } = useParams();\r\n  const [formId, setFormId] = useState(null);\r\n  const [selectedVersionId, setSelectedVersionId] = useState(formVersionId);\r\n  const [isEditable, setIsEditable] = useState(true);\r\n  const [isFirstSave, setIsFirstSave] = useState(false);\r\n  const [isLoadingForm, setIsLoadingForm] = useState(false);\r\n  const [formVersions, setFormVersions] = useState([]);\r\n  const [isNewVersion, setIsNewVersion] = useState(false);\r\n  const [fetchFormError, setFetchFormError] = useState(null);\r\n  const [currentFormVersion, setCurrentFormVersion] = useState(null);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [showFormNamePopup, setShowFormNamePopup] = useState(!formVersionId);\r\n  const [formName, setFormName] = useState('');\r\n  const [formNameError, setFormNameError] = useState(null);\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  const [selectedObjects, setSelectedObjects] = useState(location.state?.selectedObjects || []);\r\n  const [selectedFields, setSelectedFields] = useState(location.state?.selectedFields || {});\r\n  const [fieldsData, setFieldsData] = useState(location.state?.fieldsData || {});\r\n\r\n  const [\r\n    fieldsState,\r\n    { set: setFields, undo, redo, canUndo, canRedo },\r\n  ] = useUndo([\r\n    {\r\n      id: 'default-header',\r\n      type: 'header',\r\n      heading: 'Contact Form',\r\n      alignment: 'center',\r\n    },\r\n  ]);\r\n  const [showSidebar, setShowSidebar] = useState(true);\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\r\n  const [selectedFieldId, setSelectedFieldId] = useState(null);\r\n  const [selectedSectionSide, setSelectedSectionSide] = useState(null);\r\n  const [selectedFooter, setSelectedFooter] = useState(null);\r\n  const [clipboard, setClipboard] = useState({ field: null, operation: null });\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [saveError, setSaveError] = useState(null);\r\n  const fields = fieldsState.present;\r\n\r\n  const fetchAccessToken = async (userId, instanceUrl) => {\r\n    try {\r\n      const response = await fetch(process.env.REACT_APP_GET_ACCESS_TOKEN_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          userId,\r\n          instanceUrl,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to fetch access token');\r\n      }\r\n      return data.access_token;\r\n    } catch (error) {\r\n      console.error('Error fetching access token:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handlePublish = async () => {\r\n    try {\r\n      setIsLoadingForm(true);\r\n      setHasChanges(false);\r\n      const userId = sessionStorage.getItem('userId');\r\n      const instanceUrl = sessionStorage.getItem('instanceUrl');\r\n      const token = (await fetchAccessToken(userId, instanceUrl));\r\n      const linkData = {\r\n        userId,\r\n        instanceUrl,\r\n        formVersionId: selectedVersionId,\r\n      };\r\n      const encryptedLinkId = encrypt(JSON.stringify(linkData));\r\n      const publishLink = `https://d2bri1qui9cr5s.cloudfront.net/public-form/${encodeURIComponent(encryptedLinkId)}`;\r\n\r\n      const { formVersion, formFields } = prepareFormData(false);\r\n      formVersion.Stage__c = 'Publish';\r\n      formVersion.Id = selectedVersionId;\r\n      formVersion.Form__c = formId;\r\n      formVersion.Publish_Link__c = publishLink;\r\n      const response = await fetch(process.env.REACT_APP_SAVE_FORM_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          userId,\r\n          instanceUrl,\r\n          formData: { formVersion, formFields },\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to publish form');\r\n      }\r\n\r\n      await fetchFormData(userId, instanceUrl);\r\n    } catch (error) {\r\n      console.error('Error publishing form:', error);\r\n      setFetchFormError(error.message || 'Failed to publish form');\r\n    } finally {\r\n      setIsLoadingForm(false);\r\n    }\r\n  };\r\n\r\n  const fetchFormData = async (userId, instanceUrl) => {\r\n    try {\r\n      setIsLoadingForm(true);\r\n      setFetchFormError(null);\r\n\r\n      const cleanedInstanceUrl = instanceUrl.replace(/https?:\\/\\//, '');\r\n      const response = await fetch(process.env.REACT_APP_FETCH_METADATA_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          userId,\r\n          instanceUrl: cleanedInstanceUrl,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to fetch metadata');\r\n      }\r\n\r\n      let formRecords = [];\r\n      if (data.FormRecords) {\r\n        try {\r\n          formRecords = JSON.parse(data.FormRecords);\r\n        } catch (e) {\r\n          console.warn('Failed to parse FormRecords:', e);\r\n        }\r\n      }\r\n\r\n      let formVersion = null;\r\n      let targetFormId = null;\r\n      for (const form of formRecords) {\r\n        formVersion = form.FormVersions.find(\r\n          (version) => version.Source === 'Form_Version__c' && version.Id === formVersionId\r\n        );\r\n        if (formVersion) {\r\n          formVersion.Form__c = form.Id;\r\n          targetFormId = form.Id;\r\n          setFormVersions(form.FormVersions);\r\n          setFormId(form.Id);\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!formVersion) {\r\n        throw new Error(`Form version with Id ${formVersionId} not found`);\r\n      }\r\n\r\n      setIsEditable(formVersion.Stage__c === 'Draft');\r\n      setCurrentFormVersion(formVersion);\r\n      const formFields = formVersion.Fields || [];\r\n\r\n      const headerField = {\r\n        id: 'default-header',\r\n        type: 'header',\r\n        heading: formVersion.Name || 'Contact Form',\r\n        alignment: 'center',\r\n      };\r\n\r\n      const pages = {};\r\n      formFields.forEach((field) => {\r\n        const pageNumber = field.Page_Number__c || 1;\r\n        if (!pages[pageNumber]) {\r\n          pages[pageNumber] = [];\r\n        }\r\n        pages[pageNumber].push(field);\r\n      });\r\n\r\n      Object.keys(pages).forEach((pageNum) => {\r\n        pages[pageNum].sort((a, b) => (a.Order_Number__c || 0) - (b.Order_Number__c || 0));\r\n      });\r\n\r\n      const reconstructedFields = [];\r\n      Object.keys(pages)\r\n        .sort((a, b) => a - b)\r\n        .forEach((pageNum, index) => {\r\n          const fieldsInPage = pages[pageNum].map((field) => {\r\n            const properties = JSON.parse(field.Properties__c || '{}');\r\n            return {\r\n              ...properties,\r\n              id: field.Unique_Key__c,\r\n            };\r\n          });\r\n          reconstructedFields.push(...fieldsInPage);\r\n          if (index < Object.keys(pages).length - 1) {\r\n            reconstructedFields.push({\r\n              id: `pagebreak-${pageNum}`,\r\n              type: 'pagebreak',\r\n            });\r\n          }\r\n        });\r\n\r\n      setFields([headerField, ...reconstructedFields]);\r\n    } catch (error) {\r\n      console.error('Error fetching form data:', error);\r\n      setFetchFormError(error.message || 'Failed to load form data');\r\n      navigate('/home');\r\n    } finally {\r\n      setIsLoadingForm(false);\r\n    }\r\n  };\r\n\r\n  const handleVersionChange = (e) => {\r\n    const newVersionId = e.target.value;\r\n    setSelectedVersionId(newVersionId);\r\n    const userId = sessionStorage.getItem('userId');\r\n    const instanceUrl = sessionStorage.getItem('instanceUrl');\r\n    if (userId && instanceUrl) {\r\n      fetchFormData(userId, instanceUrl, newVersionId);\r\n      navigate(`/form-builder/${newVersionId}`);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    console.log(fieldsState);\r\n    \r\n  },[fieldsState]);\r\n  useEffect(() => {\r\n    const userId = sessionStorage.getItem('userId');\r\n    const instanceUrl = sessionStorage.getItem('instanceUrl');\r\n    if (!userId || !instanceUrl) {\r\n      setFetchFormError('Missing userId or instanceUrl. Please log in.');\r\n      return;\r\n    }\r\n    if (formVersionId) {\r\n      setSelectedVersionId(formVersionId);\r\n      fetchFormData(userId, instanceUrl, formVersionId);\r\n    } else {\r\n      setFields([\r\n        { id: 'default-header', type: 'header', heading: 'Contact Form', alignment: 'center' },\r\n      ]);\r\n    }\r\n  }, [formVersionId]);\r\n\r\n  useEffect(() => {\r\n    if (currentFormVersion) {\r\n      const originalFields = currentFormVersion.Fields || [];\r\n      const currentFields = prepareFormData().formFields;\r\n      const hasFieldChanges = JSON.stringify(originalFields) !== JSON.stringify(currentFields);\r\n      setHasChanges(hasFieldChanges);\r\n    }\r\n  }, [fields]);\r\n\r\n  const handleFormNameSubmit = async () => {\r\n    if (!formName.trim()) {\r\n      setFormNameError('Form name is required.');\r\n      return;\r\n    }\r\n    setIsSaving(true);\r\n    setFormNameError(null);\r\n    try {\r\n      const userId = sessionStorage.getItem('userId');\r\n      const instanceUrl = sessionStorage.getItem('instanceUrl');\r\n      const token = await fetchAccessToken(userId, instanceUrl);\r\n      if (!token) throw new Error('Failed to obtain access token.');\r\n      const { formVersion, formFields } = prepareFormData(true);\r\n      const response = await fetch(process.env.REACT_APP_SAVE_FORM_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          userId,\r\n          instanceUrl: instanceUrl.replace(/https?:\\/\\//, ''),\r\n          formData: { formVersion, formFields },\r\n        }),\r\n      });\r\n      const data = await response.json();\r\n      console.log('Form creation response:', data);\r\n      \r\n      if (!response.ok) throw new Error(data.error || 'Failed to create form.');\r\n      const newFormVersionId = data.formVersionId;\r\n      setCurrentFormVersion({ ...formVersion, Id: newFormVersionId, Fields: formFields });\r\n      setIsFirstSave(true);\r\n      setShowFormNamePopup(false);\r\n      navigate(`/form-builder/${newFormVersionId}`);\r\n    } catch (error) {\r\n      console.error('Error creating form:', error);\r\n      setFormNameError(error.message || 'Failed to create form.');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const prepareFormData = (isNewForm = false) => {\r\n    const headerField = fields.find((f) => f.type === 'header');\r\n    const nonHeaderFields = fields.filter((f) => f.type !== 'header');\r\n    const pages = [];\r\n    let currentPage = [];\r\n    let pageNumber = 1;\r\n    nonHeaderFields.forEach((field) => {\r\n      if (field.type === 'pagebreak') {\r\n        pages.push({ fields: currentPage, pageNumber });\r\n        pageNumber++;\r\n        currentPage = [];\r\n      } else {\r\n        currentPage.push(field);\r\n      }\r\n    });\r\n    if (currentPage.length > 0 || pages.length === 0) {\r\n      pages.push({ fields: currentPage, pageNumber });\r\n    }\r\n    const formVersion = {\r\n      Name: isNewForm ? formName : headerField?.heading || 'Contact Form',\r\n      Description__c: '',\r\n      Stage__c: 'Draft',\r\n      Publish_Link__c: '',\r\n    };\r\n    \r\n    if (!isNewForm && currentFormVersion?.Form__c) {\r\n      formVersion.Form__c = currentFormVersion.Form__c;\r\n    }\r\n    if (isNewForm) {\r\n      formVersion.Version__c = '1';\r\n    } else if (isFirstSave && formVersionId) {\r\n      formVersion.Id = formVersionId;\r\n      formVersion.Version__c = '1';\r\n    }\r\n    else if (formVersionId && currentFormVersion && hasChanges && !formVersion.Stage__c==='Draft') {\r\n      const currentVersionNum = parseFloat(currentFormVersion.Version__c) || 1;\r\n      formVersion.Version__c = (currentVersionNum + 1).toFixed(0);\r\n    } else if (formVersionId) {\r\n      formVersion.Id = formVersionId;\r\n      formVersion.Version__c = currentFormVersion?.Version__c || '1';\r\n    } else {\r\n      formVersion.Version__c = '1';\r\n    }\r\n    const formFields = pages.flatMap((page) =>\r\n      page.fields.map((field, index) => ({\r\n        Name: field.label || field.type.charAt(0).toUpperCase() + field.type.slice(1),\r\n        Field_Type__c: field.type,\r\n        Page_Number__c: page.pageNumber,\r\n        Order_Number__c: index + 1,\r\n        Properties__c: JSON.stringify(field),\r\n        Unique_Key__c: field.id,\r\n      }))\r\n    );\r\n    \r\n    return { formVersion, formFields };\r\n  };\r\n\r\n  const saveFormToSalesforce = async () => {\r\n    if (!isEditable) return;\r\n    setIsSaving(true);\r\n    setSaveError(null);\r\n    try {\r\n      const userId = sessionStorage.getItem('userId');\r\n      const instanceUrl = sessionStorage.getItem('instanceUrl');\r\n      if (!userId || !instanceUrl) throw new Error('Missing userId or instanceUrl.');\r\n      const token = await fetchAccessToken(userId, instanceUrl);\r\n      if (!token) throw new Error('Failed to obtain access token.');\r\n      const { formVersion, formFields } = prepareFormData();\r\n      \r\n      const response = await fetch(process.env.REACT_APP_SAVE_FORM_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          userId,\r\n          instanceUrl: instanceUrl.replace(/https?:\\/\\//, ''),\r\n          formData: { formVersion, formFields },\r\n        }),\r\n      });\r\n      const data = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(JSON.stringify(data) || 'Failed to save form.');\r\n      }\r\n      alert('Form saved successfully!');\r\n      if (hasChanges || !formVersion.Id) {\r\n        const newFormVersionId = data.formVersionId;\r\n        setCurrentFormVersion({ ...formVersion, Id: newFormVersionId, Fields: formFields });\r\n        setSelectedVersionId(newFormVersionId);\r\n        navigate(`/form-builder/${newFormVersionId}`);\r\n        setHasChanges(false);\r\n      } else {\r\n        setCurrentFormVersion({ ...formVersion, Id: formVersionId, Fields: formFields });\r\n      }\r\n      setIsFirstSave(false);\r\n    } catch (error) {\r\n      console.error('Error saving form:', error);\r\n      setSaveError(error.message || 'Failed to save form.');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const getDefaultValidation = (fieldType) => {\r\n    const field = fieldType.toLowerCase().replace(/\\s+/g, '');\r\n    const validations = {\r\n      fullname: {\r\n        pattern: \"^[a-zA-Z\\\\s'-]+$\",\r\n        description: \"Only letters, spaces, hyphens, and apostrophes allowed.\"\r\n      },\r\n      phonenumber: {\r\n        pattern: \"^\\\\+?[0-9]{7,15}$\",\r\n        description: \"Must be a valid phone number (7-15 digits, optional '+').\"\r\n      },\r\n      email: {\r\n        pattern: \"^[^@\\\\s]+@[^@\\\\s]+\\\\.[^@\\\\s]+$\",\r\n        description: \"Must be a valid email (e.g., user@example.com).\"\r\n      },\r\n      address: {\r\n        pattern: \"^[\\\\w\\\\s\\\\-\\\\.,#]+$\",\r\n        description: \"Alphanumeric, spaces, hyphens, commas, and periods allowed.\"\r\n      },\r\n      fileupload: {\r\n        pattern: \".*\\\\.(jpg|jpeg|png|gif|pdf|doc|docx)$\",\r\n        description: \"Only JPG, PNG, GIF, PDF, DOC, or DOCX files allowed.\"\r\n      },\r\n      signature: {\r\n        pattern: \"^[\\\\w\\\\s\\\\-\\\\.,#]+$\",\r\n        description: \"Must be a valid signature input.\"\r\n      },\r\n      termsofservice: {\r\n        pattern: \"^true$\",\r\n        description: \"Must be accepted (checked).\"\r\n      },\r\n      link: {\r\n        pattern: \"^(https?:\\\\/\\\\/)?[\\\\w.-]+\\\\.[a-z]{2,}(\\\\/\\\\S*)?$\",\r\n        description: \"Must be a valid URL (e.g., https://example.com).\"\r\n      },\r\n      date: {\r\n        pattern: \"^\\\\d{4}-\\\\d{2}-\\\\d{2}$\",\r\n        description: \"Must be in YYYY-MM-DD format.\"\r\n      },\r\n      datetime: {\r\n        pattern: \"^\\\\d{4}-\\\\d{2}-\\\\d{2} \\\\d{2}:\\\\d{2}$\",\r\n        description: \"Must be in YYYY-MM-DD HH:MM format.\"\r\n      },\r\n      time: {\r\n        pattern: \"^\\\\d{2}:\\\\d{2}$\",\r\n        description: \"Must be in HH:MM format.\"\r\n      },\r\n      emojirating: {\r\n        pattern: \"^[1-5]$\",\r\n        description: \"Rating must be between 1 and 5.\"\r\n      },\r\n      starrating: {\r\n        pattern: \"^[1-5]$\",\r\n        description: \"Rating must be between 1 and 5.\"\r\n      },\r\n      scalerating: {\r\n        pattern: \"^[0-5]$\",\r\n        description: \"Must be a rating between 0 and 5.\"\r\n      },\r\n      shorttext: {\r\n        pattern: \"^.{1,255}$\",\r\n        description: \"Maximum 255 characters allowed.\"\r\n      },\r\n      longtext: {\r\n        pattern: \"^.{1,1000}$\",\r\n        description: \"Maximum 1000 characters allowed.\"\r\n      },\r\n      number: {\r\n        pattern: \"^[0-9]+$\",\r\n        description: \"Only numbers allowed.\"\r\n      },\r\n      checkbox: {\r\n        pattern: \"^true|false$\",\r\n        description: \"Must be checked (true) or unchecked (false).\"\r\n      },\r\n      displaytext: {\r\n        pattern: \".*\",\r\n        description: \"Display-only text (no validation needed).\"\r\n      },\r\n      price: {\r\n        pattern: \"^\\\\d+(\\\\.\\\\d{1,2})?$\",\r\n        description: \"Must be a valid price (e.g., 10 or 10.99).\"\r\n      },\r\n      radiobutton: {\r\n        pattern: \".*\",\r\n        description: \"Must select one of the available options.\"\r\n      },\r\n      togglebutton: {\r\n        pattern: \"^true|false$\",\r\n        description: \"Must be toggled (true) or untoggled (false).\"\r\n      },\r\n      dropdownelements: {\r\n        pattern: \".*\",\r\n        description: \"Must select one of the available options.\"\r\n      },\r\n      imageuploader: {\r\n        pattern: \".*\\\\.(jpg|jpeg|png|gif|pdf|doc|docx)$\",\r\n        description: \"Only images (JPG, PNG, GIF), PDF, or Word documents allowed.\"\r\n      },\r\n      section: {\r\n        pattern: \".*\",\r\n        description: \"Display-only section (no validation needed).\"\r\n      },\r\n      default: {\r\n        pattern: \".*\",\r\n        description: \"No specific validation rules.\"\r\n      }\r\n    };\r\n    return validations[field] || validations['default'];\r\n  };\r\n  const handleDrop = (\r\n    fieldType,\r\n    pageIndex,\r\n    dropIndex,\r\n    fieldId = null,\r\n    sectionId = null,\r\n    sectionSide = null,\r\n    newField = null\r\n  ) => {\r\n    setHasChanges(true);\r\n    let updatedFields = [...fields];\r\n\r\n    const pages = [];\r\n    let currentPageFields = [];\r\n    updatedFields.forEach((field) => {\r\n      if (field.type === 'pagebreak') {\r\n        pages.push({ fields: currentPageFields });\r\n        currentPageFields = [];\r\n      } else {\r\n        currentPageFields.push(field);\r\n      }\r\n    });\r\n    pages.push({ fields: currentPageFields });\r\n\r\n    if (pageIndex >= pages.length) {\r\n      pages.push({ fields: [] });\r\n    }\r\n\r\n    const targetPage = pages[pageIndex];\r\n\r\n    const insertIndex = (dropIndex !== null && dropIndex !== undefined) ? dropIndex + 1 : targetPage.fields.length;\r\n\r\n    if (newField && fieldId) {\r\n      pages.forEach(page => {\r\n        page.fields = page.fields.filter(f => f.id !== fieldId);\r\n      });\r\n      targetPage.fields.splice(insertIndex, 0, { ...newField, isCut: false });\r\n      setSelectedFieldId(newField.id);\r\n      setSelectedSectionSide(newField.sectionSide || null);\r\n      setShowSidebar(false);\r\n    } else if (newField && !fieldId) {\r\n      targetPage.fields.splice(insertIndex, 0, newField);\r\n      setSelectedFieldId(newField.id);\r\n      setSelectedSectionSide(newField.sectionSide || null);\r\n      setShowSidebar(false);\r\n    } else if (fieldType) {\r\n      const newFieldId = `field-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n      const newFieldObj = {\r\n        id: newFieldId,\r\n        type: fieldType,\r\n        sectionId: sectionId || null,\r\n        sectionSide: sectionSide || null,\r\n        validation: getDefaultValidation(fieldType), // <-- Add this line to include validation key\r\n      };\r\n\r\n      targetPage.fields.splice(insertIndex, 0, newFieldObj);\r\n    }\r\n\r\n    const flattenedFields = [];\r\n    pages.forEach((page, idx) => {\r\n      flattenedFields.push(...page.fields);\r\n      if (idx < pages.length - 1) {\r\n        flattenedFields.push({ id: `pagebreak-${idx}`, type: 'pagebreak' });\r\n      }\r\n    });\r\n\r\n    const headerField = fields.find(f => f.type === 'header');\r\n    const finalFields = headerField ? [headerField, ...flattenedFields.filter(f => f.type !== 'header')] : flattenedFields;\r\n\r\n    setFields(finalFields);\r\n  };\r\n\r\n  const handleReorder = (fromIndex, toIndex, pageIndex) => {\r\n    setHasChanges(true);\r\n    const pages = [];\r\n    let currentPage = [];\r\n    const nonHeaderFields = fields.filter((f) => f.type !== 'header');\r\n    nonHeaderFields.forEach((field) => {\r\n      if (field.type === 'pagebreak') {\r\n        pages.push({ fields: currentPage });\r\n        currentPage = [];\r\n      } else {\r\n        currentPage.push(field);\r\n      }\r\n    });\r\n    if (currentPage.length > 0 || pages.length === 0) {\r\n      pages.push({ fields: currentPage });\r\n    }\r\n\r\n    const targetPageFields = [...pages[pageIndex].fields];\r\n    const [movedField] = targetPageFields.splice(fromIndex, 1);\r\n    targetPageFields.splice(toIndex, 0, movedField);\r\n    pages[pageIndex].fields = targetPageFields;\r\n\r\n    const flattenedFields = pages.flatMap((page, idx) => [\r\n      ...page.fields,\r\n      ...(idx < pages.length - 1 ? [{ id: `pagebreak-${idx}`, type: 'pagebreak' }] : []),\r\n    ]);\r\n\r\n    const headerField = fields.find((f) => f.type === 'header');\r\n    setFields(headerField ? [headerField, ...flattenedFields] : flattenedFields);\r\n  };\r\n\r\n  const handleUpdateField = (fieldId, updates) => {\r\n    setHasChanges(true);\r\n    const updatedFields = fields.map((field) => {\r\n      if (field.id === fieldId) {\r\n        return { ...field, ...updates };\r\n      }\r\n      if (field.type === 'section') {\r\n        if (field.leftField?.id === fieldId) {\r\n          return { ...field, leftField: { ...field.leftField, ...updates } };\r\n        }\r\n        if (field.rightField?.id === fieldId) {\r\n          return { ...field, rightField: { ...field.rightField, ...updates } };\r\n        }\r\n      }\r\n      return field;\r\n    });\r\n    setFields(updatedFields);\r\n  };\r\n\r\n  const handleDeleteField = (fieldId, showSidebarAfter = true) => {\r\n    setHasChanges(true);\r\n    const updatedFields = fields\r\n      .map((field) => {\r\n        if (field.type === 'section') {\r\n          if (field.leftField?.id === fieldId) {\r\n            return { ...field, leftField: null };\r\n          }\r\n          if (field.rightField?.id === fieldId) {\r\n            return { ...field, rightField: null };\r\n          }\r\n        }\r\n        return field;\r\n      })\r\n      .filter((field) => field.id !== fieldId);\r\n    setFields(updatedFields);\r\n    if (showSidebarAfter) {\r\n      setSelectedFieldId(null);\r\n      setSelectedSectionSide(null);\r\n      setSelectedFooter(null);\r\n      setShowSidebar(true);\r\n    }\r\n  };\r\n\r\n  const handleDeletePage = (pageIndex) => {\r\n    setHasChanges(true);\r\n    const pages = [];\r\n    let currentPage = [];\r\n    const nonHeaderFields = fields.filter((f) => f.type !== 'header');\r\n    nonHeaderFields.forEach((field) => {\r\n      if (field.type === 'pagebreak') {\r\n        pages.push({ fields: currentPage });\r\n        currentPage = [];\r\n      } else {\r\n        currentPage.push(field);\r\n      }\r\n    });\r\n    if (currentPage.length > 0 || pages.length === 0) {\r\n      pages.push({ fields: currentPage });\r\n    }\r\n\r\n    if (pages.length <= 1) return;\r\n\r\n    pages.splice(pageIndex, 1);\r\n    const flattenedFields = pages.flatMap((page, idx) => [\r\n      ...page.fields,\r\n      ...(idx < pages.length - 1 ? [{ id: `pagebreak-${idx}`, type: 'pagebreak' }] : []),\r\n    ]);\r\n\r\n    const headerField = fields.find((f) => f.type === 'header');\r\n    setFields(headerField ? [headerField, ...flattenedFields] : flattenedFields);\r\n  };\r\n\r\n const handleAddPage = () => {\r\n  setHasChanges(true);\r\n  setFields(prevFields => {\r\n    const nonHeaderFields = prevFields.filter((f) => f.type !== 'header');\r\n    const headerField = prevFields.find((f) => f.type === 'header');\r\n    const updatedFields = [\r\n      ...prevFields,\r\n      { id: `pagebreak-${nonHeaderFields.length}`, type: 'pagebreak' },\r\n    ];\r\n    return headerField\r\n      ? [headerField, ...updatedFields.filter((f) => f.type !== 'header')]\r\n      : updatedFields;\r\n  });\r\n};\r\n\r\n\r\n  const handleCut = (field) => {\r\n    setHasChanges(true);\r\n    setClipboard({ field, operation: 'cut' });\r\n    handleUpdateField(field.id, { isCut: true });\r\n  };\r\n\r\n  const handleCopy = (field) => {\r\n    setClipboard({ field, operation: 'copy' });\r\n  };\r\n\r\n  const handlePaste = (pageIndex, dropIndex, sectionId, sectionSide) => {\r\n    setHasChanges(true);\r\n    if (!clipboard.field) return;\r\n\r\n    const newField = {\r\n      ...clipboard.field,\r\n      id: `field-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\r\n      isCut: false,\r\n      sectionId: sectionId || null,\r\n      sectionSide: sectionSide || null,\r\n    };\r\n\r\n    if (clipboard.operation === 'cut') {\r\n      handleDeleteField(clipboard.field.id, false);\r\n    }\r\n\r\n    handleDrop(null, pageIndex, dropIndex, null, sectionId, sectionSide, newField);\r\n    setClipboard({ field: null, operation: null });\r\n  };\r\n\r\n  const toggleSidebar = () => {\r\n    setIsSidebarOpen(!isSidebarOpen);\r\n  };\r\n\r\n  const getSelectedField = () => {\r\n    if (!selectedFieldId) return null;\r\n    for (const field of fields) {\r\n      if (field.id === selectedFieldId) {\r\n        return field.type === 'section' ? null : field;\r\n      }\r\n      if (field.type === 'section') {\r\n        if (field.leftField?.id === selectedFieldId) return field.leftField;\r\n        if (field.rightField?.id === selectedFieldId) return field.rightField;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const selectedField = getSelectedField();\r\n\r\n  return (\r\n    <div className=\"flex h-screen\">\r\n      <MainMenuBar isSidebarOpen={isSidebarOpen} \r\n        toggleSidebar={toggleSidebar} \r\n        selectedObjects={selectedObjects}\r\n        selectedFields={selectedFields}\r\n        fieldsData={fieldsData}\r\n        formVersionId={selectedVersionId} />\r\n      <div\r\n        className={`flex-1 flex flex-col relative h-screen transition-all duration-300 ${\r\n          isSidebarOpen ? 'ml-64' : 'ml-16'\r\n        }`}\r\n      >\r\n        <div className=\"bg-[#6A9AB0] text-white h-1/3\"></div>\r\n        <div className=\"bg-white h-2/3\"></div>\r\n        <div className=\"absolute top-0 inset-x-1 flex flex-col px-4\">\r\n          <div className=\"text-white p-4 w-full flex justify-between items-center\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"text-left\">\r\n                <h1 className=\"text-2xl font-semibold text-white\">\r\n                  {fields.find((f) => f.type === 'header')?.heading || 'Contact Form'}\r\n                </h1>\r\n                <p className=\"text-sm text-blue-100\">Define the form structure</p>\r\n                <select\r\n                  value={selectedVersionId || ''}\r\n                  onChange={handleVersionChange}\r\n                  className=\"p-2 bg-white text-black rounded-md\"\r\n                >\r\n                  <option value=\"\" disabled>Select Version</option>\r\n                  {formVersions.map((version) => (\r\n                    <option key={version.Id} value={version.Id}>\r\n                      Version {version.Version__c} ({version.Stage__c})\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                onClick={undo}\r\n                disabled={!canUndo}\r\n                className={`p-2 rounded ${!canUndo ? 'text-gray-300 cursor-not-allowed' : 'text-white hover:bg-blue-700'}`}\r\n                title=\"Undo\"\r\n              >\r\n                <MdUndo size={18} />\r\n              </button>\r\n              <button\r\n                onClick={redo}\r\n                disabled={!canRedo}\r\n                className={`p-2 rounded ${!canRedo ? 'text-gray-300 cursor-not-allowed' : 'text-white hover:bg-blue-700'}`}\r\n                title=\"Redo\"\r\n              >\r\n                <MdRedo size={18} />\r\n              </button>\r\n              <button\r\n                className=\"p-2 rounded text-white hover:bg-blue-700\"\r\n                title=\"Preview\"\r\n              >\r\n                <FaEye size={18} />\r\n              </button>\r\n              <button\r\n                onClick={handleAddPage}\r\n                className=\"p-2 bg-blue-900 text-white rounded hover:bg-blue-100 font-medium\"\r\n                title=\"Add Page\"\r\n              >\r\n                Add Page\r\n              </button>\r\n              {(currentFormVersion?.Stage__c === 'Draft' || currentFormVersion?.Stage__c === 'Locked') && (\r\n                <button\r\n                  onClick={handlePublish}\r\n                  disabled={isLoadingForm || currentFormVersion?.Stage__c === 'Publish'}\r\n                  className=\"p-2 bg-green-500 text-white rounded-md disabled:bg-gray-400\"\r\n                >\r\n                  Publish\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={saveFormToSalesforce}\r\n                disabled={isSaving || currentFormVersion?.Stage__c !== 'Draft'}\r\n                className={`p-2 bg-blue-900 text-white rounded font-medium flex items-center gap-2 ${\r\n                  isSaving ? 'opacity-50 cursor-not-allowed' : 'hover:bg-blue-100'\r\n                }`}\r\n                title=\"Save Form\"\r\n              >\r\n                {isSaving ? (\r\n                  <>\r\n                    <svg\r\n                      className=\"animate-spin h-5 w-5 text-white\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      fill=\"none\"\r\n                      viewBox=\"0 0 24 24\"\r\n                    >\r\n                      <circle\r\n                        className=\"opacity-25\"\r\n                        cx=\"12\"\r\n                        cy=\"12\"\r\n                        r=\"10\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"4\"\r\n                      ></circle>\r\n                      <path\r\n                        className=\"opacity-75\"\r\n                        fill=\"currentColor\"\r\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                      ></path>\r\n                    </svg>\r\n                    Saving...\r\n                  </>\r\n                ) : (\r\n                  'Save Form'\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          {saveError && (\r\n            <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mt-2\">\r\n              {saveError}\r\n            </div>\r\n          )}\r\n          {fetchFormError && (\r\n            <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mt-2\">\r\n              {fetchFormError}\r\n            </div>\r\n          )}\r\n          {isLoadingForm ? (\r\n            <div className=\"flex justify-center items-center h-64\">\r\n              <svg\r\n                className=\"animate-spin h-8 w-8 text-blue-600\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                fill=\"none\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <circle\r\n                  className=\"opacity-25\"\r\n                  cx=\"12\"\r\n                  cy=\"12\"\r\n                  r=\"10\"\r\n                  stroke=\"currentColor\"\r\n                  strokeWidth=\"4\"\r\n                ></circle>\r\n                <path\r\n                  className=\"opacity-75\"\r\n                  fill=\"currentColor\"\r\n                  d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex w-full mt-4\">\r\n              <div className=\"w-3/4 pr-2\">\r\n                <div className=\"bg-transparent rounded-lg h-full overflow-y-auto pt-4\">\r\n                  <FormBuilder\r\n                    fields={fields}\r\n                    onDrop={handleDrop}\r\n                    onReorder={handleReorder}\r\n                    onUpdateField={handleUpdateField}\r\n                    onDeleteField={handleDeleteField}\r\n                    onDeletePage={handleDeletePage}\r\n                    showSidebar={showSidebar}\r\n                    setShowSidebar={setShowSidebar}\r\n                    setSelectedFieldId={setSelectedFieldId}\r\n                    setSelectedSectionSide={setSelectedSectionSide}\r\n                    setSelectedFooter={setSelectedFooter}\r\n                    selectedFieldId={selectedFieldId}\r\n                    selectedSectionSide={selectedSectionSide}\r\n                    setClipboard={setClipboard}\r\n                    clipboard={clipboard}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"w-1/4 pl-2\">\r\n                {showSidebar && !selectedFieldId && !selectedFooter ? (\r\n                  <Sidebar />\r\n                ) : (\r\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg\">\r\n                    {(selectedFieldId || selectedFooter) && (\r\n                      <FieldEditor\r\n                        selectedField={selectedField}\r\n                        selectedFooter={selectedFooter}\r\n                        onUpdateField={handleUpdateField}\r\n                        onDeleteField={handleDeleteField}\r\n                        onClose={() => {\r\n                          setSelectedFieldId(null);\r\n                          setSelectedSectionSide(null);\r\n                          setSelectedFooter(null);\r\n                          setShowSidebar(true);\r\n                        }}\r\n                        fields={fields}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {showFormNamePopup && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h2 className=\"text-xl font-bold\">Enter Form Name</h2>\r\n              <button onClick={() => navigate('/home')} className=\"text-gray-500 hover:text-gray-700\"></button>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              value={formName}\r\n              onChange={(e) => setFormName(e.target.value)}\r\n              placeholder=\"Form Name\"\r\n              className=\"w-full p-2 border rounded-md mb-4\"\r\n            />\r\n            {formNameError && <p className=\"text-red-500 text-sm mb-4\">{formNameError}</p>}\r\n            <button\r\n              onClick={handleFormNameSubmit}\r\n              disabled={isSaving}\r\n              className={`w-full p-2 bg-blue-600 text-white rounded-md ${isSaving ? 'opacity-50' : 'hover:bg-blue-700'}`}\r\n            >\r\n              {isSaving ? 'Creating...' : 'Create Form'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainFormBuilder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}